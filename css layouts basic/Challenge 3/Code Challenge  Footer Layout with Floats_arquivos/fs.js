(function(){var E=this&&this.__extends||function(a,g){function f(){this.constructor=a}for(var c in g)g.hasOwnProperty(c)&&(a[c]=g[c]);a.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)},n;(function(a){var g;a.Namespace=function(a){if(!g){var c=a._fs_loaded;g=c?c:a._fs_namespace?a._fs_namespace:"FS"}return g};a.isLoaded=function(a){return a._fs_loaded};a.setLoaded=function(a,c){a._fs_loaded=c;c in a||(a[c]={})}})(n||(n={}));(function(a){a._fs_debug=function(a){return!!a._fs_ext_debug||
!!a._fs_debug};a._fs_host=function(a){return a._fs_ext_host||a._fs_host};a._fs_org=function(a){return a._fs_ext_org||a._fs_org};a._fs_csp=function(a){return a._fs_csp};a._fs_cookie_domain=function(a){return a._fs_cookie_domain};a._fs_ready=function(a){return a._fs_ready};a._fs_run_in_iframe=function(a){return!!a._fs_run_in_iframe};a._fs_is_outer_script=function(a){return!!a._fs_is_outer_script};a._fs_replay_flags=function(a){return a._fs_replay_flags};a._fs_transport=function(a){return a._fs_transport};
a.set_fs_shutdown=function(a,f){a._fs_shutdown=f};a.FS_q_drain=function(g){if((g=g[a.Namespace(g)])&&"q"in g){var f=g.q;delete g.q;return f}return[]};a.FS_q_push=function(g,f){var c=g[a.Namespace(g)];"q"in c||(c.q=[]);c.q.push(f)}})(n||(n={}));(function(a){a.windex=window;var g;a.initWindex=function(f){if(f.document&&f.document.head){if(g)try{a.windex.JSON.stringify(0);return}catch(c){}var d=f.document.head,b=f.document.createElement("iframe");b.id="FullStory-iframe";b.className="fs-hide";b.setAttribute("style",
"display: none;");d.appendChild(b);b.src="about:blank";g=b;a.windex=g.contentWindow;f.document.head.removeChild(g);try{a.windex.JSON.stringify(0)}catch(e){a.windex=f}}}})(n||(n={}));(function(a){function g(a){b&&window.console&&console.log(a)}function f(b,c){var d=0;try{a.windex.JSON.stringify(b,function(a,b){if(d++>c)throw"break";return"object"!=typeof b?void 0:b})}catch(e){if("break"!=e)return!0}return!1}function c(b,e,k,q){if(1>e)return 0;var s;b&&b.constructor==Date?s=isNaN(b)?"Invalid Date":
b.toUTCString():(s="object"===typeof Node?b instanceof Node:b&&"object"===typeof b&&0<b.nodeType&&"string"===typeof b.nodeName,s=s?d(b):void 0===b?"undefined":"object"!=typeof b||null==b?b:b instanceof Error?b.stack||b.name+": "+b.message:void 0);if(void 0!==s){s=a.windex.JSON.stringify(s);if(void 0===s)return 0;'"'==s[0]&&(s=h(s,e,'..."'));return s.length<=e?(q.tokens.push(s),s.length):0}if(q.catchCycles){q.opath.splice(k);s=q.opath.lastIndexOf(b);if(-1<s)return b='"'+h("<Cycle to ancestor #"+(k-
s-1)+">",e-2)+'"',q.tokens.push(b),b.length;q.opath.push(b)}var l=e,m=function(a){return l>=a.length?(l-=a.length,q.tokens.push(a),!0):!1};s=function(a){","==q.tokens[q.tokens.length-1]?q.tokens[q.tokens.length-1]=a:m(a)};if(2>l)return 0;if(a.isArray(b)){m("[");for(var f=0;f<b.length&&0<l;f++){var g=c(b[f],l-1,k+1,q),l=l-g;if(0==g&&!m("null"))break;m(",")}s("]")}else{m("{");for(var x=Object.keys(b),f=0;f<x.length&&0<l;f++){var g=x[f],z=b[g];if(!m('"'+g+'":'))break;g=c(z,l-1,k+1,q);if(0==g){q.tokens.pop();
break}l-=g;m(",")}s("}")}return Infinity==e?1:e-l}function d(a){if(a.tagName){var b=a.tagName.toLowerCase();return"<"+b+(a.attributes&&a.attributes.type?' type="'+a.attributes.type.value+'"':"")+(a.id?' id="'+a.id+'"':"")+(a.className?' class="'+a.className+'"':"")+">...</"+b+">"}b="";a.data&&a.data.substring&&(b=" "+a.data.substring(0,50)+(50<a.data.length?"...":""));return a.nodeName+b}var b=!1;a.bind=Function.prototype.bind?function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];
return a.bind.apply(a,[b].concat(c))}:function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];return function(){var d=Array.prototype.slice.call(arguments);a.call.apply(a,[b].concat(c,d))}};a._native_filter=function(a,b,c){return a.filter(b,c)};a._js_filter=function(a,b,c){for(var d=Array(a.length),e=0;e<a.length;e++)d[e]=b.call(c,a[e],e,a);return d};a.filter=Array.prototype.filter?a._native_filter:a._js_filter;var e=function(b){return a.windex.Array.isArray(b)},k=function(b){return"[object Array]"==
a.windex.Object.prototype.toString.call(b)};a.isArray=a.windex.Array.isArray?e:k;a.firstKey=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return b};a.firstValue=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};a.hasNKeys=function(a,b){var c=0,d;for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&++c>b)return!1;return c==b};a.hasMoreThanNKeys=function(a,b){var c=0,d;for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&++c>b)return!0;
return!1};a.$entry=function(a,b){return a&&a.apply?function(){try{return a.apply(b||this,arguments)}catch(c){}}:a};a.initDebug=function(c){b=a._fs_debug(c)};a.isDebug=function(){return b};a.logIfDebug=g;a.logFSError=function(a){};a.stringify=function(a,b,d){void 0===b&&(b=Infinity);void 0===d&&(d=!0);try{var e={tokens:[],opath:[],catchCycles:d&&f(a,b/4)};c(a,b,0,e);return e.tokens.join("")}catch(k){a="Internal error: unable to determine what JSON error was";try{a=""+k,a=a.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,
"_")}catch(h){}return'"'+a+'"'}};var h=function(a,b,c){void 0===c&&(c="...");return a.length<=b?a:a.length<=c.length||b<=c.length?a.substring(0,b):a.substring(0,b-c.length)+c};a.baseUri=function(a){return"baseURI"in a?a.baseURI:(a=a.getElementsByTagName("base")[0])&&a.href?a.href:location.href};a.doctypeString=function(a){a=a.doctype;if(!a)return null;var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"};a.parseJson=function(b){return a.windex.JSON.parse(b)};
a.tryGetScreenDims=function(a){var b=0,c=0;if(null==a.screen)return[b,c];b=parseInt(String(a.screen.width));c=parseInt(String(a.screen.height));b=isNaN(b)?0:b;c=isNaN(c)?0:c;return[b,c]};e=function(){function a(){this._listeners=[];this._yesCapture=!0;this._noCapture=!1;try{var b=Object.defineProperty({},"passive",{get:function(){this._yesCapture={capture:!0,passive:!0};this._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",null,b)}catch(c){}}a.prototype.add=function(a,b,c,d){c=
{target:a,type:b,fn:function(a){d(a)},options:c?this._yesCapture:this._noCapture,index:this._listeners.length};this._listeners.push(c);a.addEventListener(b,c.fn,c.options);return c};a.prototype.remove=function(a){a.target.removeEventListener(a.type,a.fn,a.options);a.target=null;a.fn=null};a.prototype.clear=function(){for(var a=0;a<this._listeners.length;a++)this._listeners[a].target&&this.remove(this._listeners[a]);this._listeners=[]};return a}();a.DomListeners=e;var l=function(){function a(b,c){this.name=
b;this._native=c;this.on=!0}a.prototype.before=function(a){this._before=a;return this};a.prototype.afterAsync=function(a){this._afterAsync=a;return this};a.prototype.afterSync=function(a){this._afterSync=a;return this};a.prototype.disable=function(){this.on=!1};a.prototype.enable=function(){this.on=!0};a.prototype.getShim=function(){this.shim||this.setupShim();return this.shim};a.prototype.setupShim=function(){var a=this;this.shim=function(){var b={that:this,args:arguments};if(a.on)try{a._before&&
a._before.call(this,b)}catch(c){g("Error in hook before "+a.name)}var d=a._native.apply(this,arguments);if(a.on)try{if(a._afterSync&&a._afterSync.call(this,b),a._afterAsync){var e=this;setTimeout(function(){try{a._afterAsync.call(e,b)}catch(c){g("Error in async hook after "+a.name)}})}}catch(k){g("Error in hook after "+a.name)}return d}};return a}(),m={};a.activateHook=function(a,b){m[b]=m[b]||[];for(var c,d=0;d<m[b].length;d++)m[b][d].obj==a&&(c=m[b][d].hook);c||(c=new l(b,a[b]),m[b].push({obj:a,
hook:c}),a[b]=c.getShim());c.enable();return c}})(n||(n={}));(function(a){a.EVENT_MUT_INSERT=2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=
22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_INNERWIDTH=40;a.EVENT_INNERWIDTH_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_DBL_CLICK=50;a.EVENT_FORM_SUBMIT=51;a.EVENT_WINDOW_FOCUS=52;a.EVENT_WINDOW_BLUR=53;a.EVENT_HEARTBEAT=54;a.NAVIGATION_TIMING=55;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_SYS_HIGHLIGHT=
8194;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_TAP="tap";a.EVENT_COOKED_FOCUS="focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH="thrash";a.EVENT_FORM_ABANDONED="abandon";a.isUserActionEvent=function(g){switch(g){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};
a.MAX_LOGS_PER_PAGE=1024})(n||(n={}));var B;(function(a){var g=function(){function a(){this.listeners=[]}a.prototype.tap=function(a){this.listeners=this.listeners.slice(0);this.listeners.push(a)};a.prototype.untap=function(a){a=this.listeners.indexOf(a);-1!=a&&(this.listeners=this.listeners.slice(0),this.listeners.splice(a,1))};a.prototype.raise=function(){for(var a=this,d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];this.listeners.forEach(function(b){b.apply(a,d)})};return a}();a.Signal=g})(B||
(B={}));(function(a){function g(a){return new u(document.createElement(a))}function f(a,b){var c=a.style.getPropertyValue(b);return c?c:getComputedStyle(a).getPropertyValue(b)}function c(a,b,c,d){"opacity"!=b&&"number"==typeof c&&(c+="px");a.style.setProperty(b,c,d||"")}function d(a,b){a.style.setProperty("-webkit-transform",b);a.style.setProperty("-moz-transform",b);a.style.setProperty("-ms-transform",b);a.style.setProperty("transform",b)}function b(a,b){a.style.setProperty("-webkit-animation-fill-mode",
b);a.style.setProperty("-moz-animation-fill-mode",b);a.style.setProperty("-ms-animation-fill-mode",b);a.style.setProperty("animation-fill-mode",b)}function e(a,b,c){null==c?delete a[b]:a[b]=c}function k(a,b){return a.hasAttribute(b)?a.getAttribute(b):""}function h(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function l(a){return a.value}function m(a,b){a.value=b}function v(a,b,c,d){a.addEventListener(b,c,!!d)}function t(a,b,c,d){a.removeEventListener(b,c,!!d)}function p(a,b){return a.classList.contains(b)}
function q(a,b){a.classList.add(b)}function s(a,b){a.classList.remove(b)}function y(a,b){a.classList.toggle(b)}function r(a,b,c){c?a.classList.add(b):a.classList.remove(b)}function n(a){var b=a.parentElement;b&&b.removeChild(a)}function F(a,b,c){(a instanceof u?a.e:a).insertBefore(b instanceof u?b.e:b,c instanceof u?c.e:c)}function x(a,b){(a instanceof u?a.e:a).appendChild(b instanceof u?b.e:b)}function z(a,b){var c=a instanceof u?a.e:a;c.insertBefore(b instanceof u?b.e:b,c.firstChild)}var u=function(){function a(b){this.e=
b}a.prototype.set=function(a){this.e=a;return this};a.prototype.selectOne=function(b){return(b=this.e.querySelector(b))?new a(b):null};a.prototype.selectMany=function(a){return new A(this.e.querySelectorAll(a))};a.prototype.focus=function(){this.e.focus();return this};a.prototype.blur=function(){this.e.blur();return this};a.prototype.click=function(){this.e.click();return this};a.prototype.hasFocus=function(){return document.activeElement==this.e};a.prototype.contains=function(b){return this.e.contains(b instanceof
a?b.e:b)};a.prototype.text=function(){return this.e.textContent};a.prototype.html=function(){return this.e.innerHTML};a.prototype.setHtml=function(a){this.e.innerHTML=a;return this};a.prototype.setText=function(a){this.e.textContent=a;return this};a.prototype.hasAttr=function(a){return this.e.hasAttribute(a)};a.prototype.attr=function(a){return k(this.e,a)};a.prototype.setAttr=function(a,b){h(this.e,a,b);return this};a.prototype.prop=function(a){return this.e[a]};a.prototype.setProp=function(a,b){e(this.e,
a,b);return this};a.prototype.val=function(){return l(this.e)};a.prototype.setVal=function(a){m(this.e,a);return this};a.prototype.css=function(a){return f(this.e,a)};a.prototype.setCss=function(a,b,d){c(this.e,a,b,d);return this};a.prototype.setCssTransform=function(a){d(this.e,a);return this};a.prototype.setCssAnimationFillmode=function(a){b(this.e,a);return this};a.prototype.on=function(a,b,c){v(this.e,a,b,c);return this};a.prototype.off=function(a,b,c){t(this.e,a,b,c);return this};a.prototype.child=
function(){var b=this.e.firstElementChild;return b?new a(b):null};a.prototype.children=function(){return new A(this.e.children)};a.prototype.parent=function(){var b=this.e.parentElement;return b?new a(b):null};a.prototype.remove=function(){n(this.e);return this};a.prototype.hasClass=function(a){return p(this.e,a)};a.prototype.setClass=function(a){this.e.className=a;return this};a.prototype.addClass=function(a){q(this.e,a);return this};a.prototype.removeClass=function(a){s(this.e,a);return this};a.prototype.toggleClass=
function(a){y(this.e,a);return this};a.prototype.switchClass=function(a,b){r(this.e,a,b);return this};a.prototype.append=function(a){x(this.e,a);return this};a.prototype.insert=function(a,b){F(this.e,a,b);return this};a.prototype.appendText=function(a){x(this.e,document.createTextNode(a));return this};a.prototype.appendTo=function(a){x(a,this.e);return this};a.prototype.prepend=function(a){z(this.e,a);return this};a.prototype.prependTo=function(a){z(a,this.e);return this};a.prototype.bounds=function(){return this.e.getBoundingClientRect()};
a.prototype.elem=function(){return this.e};a.prototype.offsetWidth=function(){return this.e.offsetWidth};a.prototype.offsetHeight=function(){return this.e.offsetHeight};a.prototype.offsetTop=function(){return this.e.offsetTop};a.prototype.offsetLeft=function(){return this.e.offsetLeft};return a}();a.OfOne=u;var A=function(){function a(b){if(b instanceof Array)this.e=b.map(function(a){return a instanceof u?a.e:a});else if(0<b.length||b instanceof NodeList||b instanceof HTMLCollection){this.e=[];for(var c=
0,d=b.length;c<d;c++)this.e.push(b[c])}else this.e=[]}a.prototype.selectMany=function(b){var c=new a;this.eachQ(function(a){a.selectMany(b).e.forEach(function(a){c.push(a)})});return c};a.prototype.empty=function(){return 0==this.e.length};a.prototype.size=function(){return this.e.length};a.prototype.contains=function(a){for(var b=this.e,c=0,d=b.length;c<d;c++)if(b[c].contains(a))return!0;return!1};a.prototype.setHtml=function(a){this.e.forEach(function(b){b.innerHTML=a});return this};a.prototype.setText=
function(a){this.e.forEach(function(b){b.textContent=a});return this};a.prototype.setAttr=function(a,b){this.e.forEach(function(c){h(c,a,b)});return this};a.prototype.setProp=function(a,b){this.e.forEach(function(c){e(c,a,b)});return this};a.prototype.setVal=function(a){this.e.forEach(function(b){m(b,a)});return this};a.prototype.setCss=function(a,b,d){this.e.forEach(function(e){c(e,a,b,d)});return this};a.prototype.setCssTransform=function(a){this.e.forEach(function(b){d(b,a)});return this};a.prototype.on=
function(a,b,c){this.e.forEach(function(d){d&&v(d,a,b,c)});return this};a.prototype.off=function(a,b,c){this.e.forEach(function(d){d&&t(d,a,b,c)});return this};a.prototype.remove=function(){this.e.forEach(n);return this};a.prototype.setClass=function(a){this.e.forEach(function(b){b.className=a});return this};a.prototype.addClass=function(a){this.e.forEach(function(b){q(b,a)});return this};a.prototype.removeClass=function(a){this.e.forEach(function(b){s(b,a)});return this};a.prototype.toggleClass=
function(a){this.e.forEach(function(b){y(b,a)});return this};a.prototype.switchClass=function(a,b){this.e.forEach(function(c){r(c,a,b)});return this};a.prototype.appendTo=function(a){this.e.forEach(function(b){x(a,b)});return this};a.prototype.prependTo=function(a){this.e.forEach(function(b){z(a,b)});return this};a.prototype.eachQ=function(a,b){b||(b=new u);this.e.forEach(function(c,d){b.set(c);a(b,d)});b.set(null);return this};a.prototype.push=function(a){this.e.push(a instanceof u?a.e:a);return this};
a.prototype.oneAt=function(a){return new u(this.e[a])};return a}();a.OfMany=A;a.createOne=g;a.createMany=function(a,b){for(var c=new A;c.e.length<b;)c.push(g(a));return c};a.selectMany=function(a,b){b=b||document;return new A(b.querySelectorAll(a))};a.selectOne=function(a,b){b=b||document;var c=b.querySelector(a);return c?new u(c):null};a.body=function(){return new u(document.body)};a.head=function(){return new u(document.head)};a.html=function(a){return a.innerHTML};a.setHtml=function(a,b){a.innerHTML=
b};a.text=function(a){return a.textContent};a.setText=function(a,b){a.textContent=b};a.css=f;a.setCss=c;a.setCssTransform=d;a.setCssAnimationFillmode=b;a.prop=function(a,b){return a[b]};a.setProp=e;a.hasAttr=function(a,b){return a.hasAttribute(b)};a.attr=k;a.setAttr=h;a.contains=function(a,b){return a.contains(b)};a.val=l;a.setVal=m;a.on=v;a.off=t;a.hasClass=p;a.setClass=function(a,b){a.className=b};a.addClass=q;a.removeClass=s;a.toggleClass=y;a.switchClass=r;a.remove=n;a.insert=F;a.append=x;a.prepend=
z})(B||(B={}));var C;(function(a){(function(a){a[a.CorePack=0]="CorePack";a[a.ExperiencePack=1]="ExperiencePack";a[a.DataPack=2]="DataPack";a[a.SupportPack=3]="SupportPack";a[a.PageInsightsPack=4]="PageInsightsPack";a[a.NumPacks=5]="NumPacks"})(a.PackId||(a.PackId={}));a.PackId_ValueToName={0:"CorePack",1:"ExperiencePack",2:"DataPack",3:"SupportPack",4:"PageInsightsPack",5:"NumPacks"};a.PackId_NameToValue={CorePack:0,ExperiencePack:1,DataPack:2,SupportPack:3,PageInsightsPack:4,NumPacks:5};(function(a){a[a.PackToPro=
0]="PackToPro";a[a.ProToPack=1]="ProToPack";a[a.ChangedPacks=2]="ChangedPacks";a[a.Sunset=3]="Sunset"})(a.ContinuityReason||(a.ContinuityReason={}));a.ContinuityReason_ValueToName={0:"PackToPro",1:"ProToPack",2:"ChangedPacks",3:"Sunset"};a.ContinuityReason_NameToValue={PackToPro:0,ProToPack:1,ChangedPacks:2,Sunset:3};(function(a){a[a.MarketingPartnerDiscount=1]="MarketingPartnerDiscount";a[a.AgencyPartnerDiscount=2]="AgencyPartnerDiscount"})(a.DiscountId||(a.DiscountId={}));a.DiscountId_ValueToName=
{1:"MarketingPartnerDiscount",2:"AgencyPartnerDiscount"};a.DiscountId_NameToValue={MarketingPartnerDiscount:1,AgencyPartnerDiscount:2};(function(a){a[a.EnterpriseDealPenalty=1]="EnterpriseDealPenalty"})(a.PenaltyId||(a.PenaltyId={}));a.PenaltyId_ValueToName={1:"EnterpriseDealPenalty"};a.PenaltyId_NameToValue={EnterpriseDealPenalty:1}})(C||(C={}));var G;(function(a){var g=a.SearchieCountType||(a.SearchieCountType={});g[g.UserCountType=0]="UserCountType";g[g.SessionCountType=1]="SessionCountType";g[g.EventCountType=
2]="EventCountType";g[g.ClickCountType=3]="ClickCountType";a.SearchieCountType_ValueToName={0:"UserCountType",1:"SessionCountType",2:"EventCountType",3:"ClickCountType"};a.SearchieCountType_NameToValue={UserCountType:0,SessionCountType:1,EventCountType:2,ClickCountType:3}})(G||(G={}));(function(a){var g=C;a.INTERNAL_CREATOR="FullStory Helpbot";a.HIGHLIGHTS_NOTE="note";a.GEO_RECORD_ALL="";a.GEO_RECORD_WHITELIST="whitelist";a.GEO_RECORD_BLACKLIST="blacklist";a.PlanStateInvalid=0;a.PlanStateCustom=1;
a.PlanStateTrial=2;a.PlanStatePaid=3;a.PlanStateFreemium=4;a.PlanStateInvoiced=5;a.PlanStateChild=6;a.PlanStateTrialExpired=7;a.PlanStateGift=8;a.planState=function(f){if(f.Custom)return a.PlanStateCustom;if(f.Invoiced)return a.PlanStateInvoiced;if(f.ParentId)return a.PlanStateChild;var c=0==f.Packs[g.PackId.CorePack],d=0==f.Packs[g.PackId.ExperiencePack];return 0==f.Price?c?d?a.PlanStateGift:a.PlanStateFreemium:f.Packs[g.PackId.CorePack]<Date.now()?a.PlanStateTrialExpired:a.PlanStateTrial:c?a.PlanStatePaid:
a.PlanStateInvalid};a.getPlanStateClass=function(f){switch(f){case a.PlanStateTrial:return"trialState";case a.PlanStateTrialExpired:return"trialExpiredState";case a.PlanStatePaid:return"paidState";case a.PlanStateFreemium:return"freemiumState";case a.PlanStateGift:return"giftState";case a.PlanStateInvoiced:return"invoicedState";case a.PlanStateChild:return"childState";case a.PlanStateCustom:return"planStateCustom";case a.PlanStateInvalid:return console.log("Invalid plan editor state: "+this._planState),
""}};a.ErrnoResourceAuthed=1;a.ErrnoResourceBadHost=2;a.ErrnoResourceWrongContent=3;a.ErrnoResourceGenericFailed=16;a.MonthGranularity="month";a.WeekGranularity="week";a.DayGranularity="day";a.HourGranularity="hour";a.AllClickType="active";a.DeadClickType="dead";a.ErrorClickType="error";a.RageClickType="rage";(function(a){a[a.Medium=0]="Medium";a[a.Large=1]="Large"})(a.VisSize||(a.VisSize={}));a.allowedSeatCounts=[20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200]})(n||(n={}));(function(a){a.Node_ELEMENT_NODE=
1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4})(n||(n={}));(function(a){function g(a,b,c,d,e){var k=document.createElement("a");f(k,a,e,d,b,c);return k}function f(a,b,c,d,
e,k){e&&(a.textContent=e);k&&(a.className=k);d&&a.setAttribute("title",d);a.href=b;a.onclick=function(a){0!=a.button||(a.ctrlKey||a.metaKey)||(a.preventDefault(),c())}}function c(a,b){return a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()}function d(a,b,c){for(;a.length<b;)a=c+a;return a}function b(a){var b=a.getHours();0==b&&(b=12);return(12<b?b-12:b)+":"+d(a.getMinutes().toString(),2,"0")+" "+(12>a.getHours()?"am":"pm")}function e(a){var d=new Date;if(c(a,
d))return b(a);d.setDate(d.getDate()-1);if(c(a,d))return"Yesterday, "+b(a);var e=l[a.getMonth()]+" "+a.getDate();a.getFullYear()!=d.getFullYear()&&(e+=", "+a.getFullYear());return e+", "+b(a)}function k(a,b){return b.length>a.length?!1:a.substring(0,b.length)==b}function h(a,b){return b.length>a.length?!1:a.substring(a.length-b.length)==b}var l="January February March April May June July August September October November December".split(" "),m="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");
a.SOLR_DATE_FORMAT=["YYYY-MM-DDTHH:mm:ss.SSSZ"];a.validateDateFromSolr=function(a,b){var c=moment(a,b,!0);return c.isValid()?c.toISOString():null};a.getNiceDateFromSolrDate=function(a){a=moment(a,"YYYY-MM-DDTHH:mm:ss.SSSZ",!0);return a.isValid()?0==a.hours()&&0==a.minutes()&&0==a.seconds()?a.format("M/D/YYYY"):a.format("M/D/YYYY h:mma"):null};a.parseURLParams=function(a){void 0===a&&(a=location.search.slice(1));var b={};a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].split(/=(?!=)(?!$)/);b[decodeURIComponent(d[0])]=
decodeURIComponent(d[1])}return b};a.hashCode=function(a){for(var b=0,c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c),b&=b;return Math.abs(b)};a.onclick=function(a,b){a.onclick=b};a.makeAnchor=function(a,b,c,d){return g(a,b,c,"",d)};a.makeAnchorWithTitle=g;a.jsAnchorWithTitle=f;a.metaEnter=function(a,b){a.on("keydown",function(a){13==a.keyCode&&(a.ctrlKey||a.metaKey)&&(b(),a.preventDefault())})};a.autoRemove=function(a,b){void 0===b&&(b=500);var c=!0,d=0;a.on("mouseenter",function(a){c=!0;d&&(clearTimeout(d),
d=0)});a.on("mouseleave",function(e){c=!1;d||(d=setTimeout(function(){d=0;c||a.remove()},b))})};a.renderTime=function(a,b){void 0===b&&(b=!0);var c=navigator.languages;return(new Date(a)).toLocaleString(c&&0<c.length?c[0]:navigator.language,{hour12:b})};a.isSameDate=c;a.lpad=d;a.chopDecimalDigits=function(a,b){if(0==b)return a|0;var c=10*b;a=Math.floor(a*c)/c;c=a|0;return a>c?a:c};a.getPercentString=function(a,b){var c=Math.round(100*a/b);return 0==c&&0<a?"< 1%":100==c&&a!=b?"> 99%":c.toString()+
"%"};a.getTimeString=b;a.monthName=function(a){return l[a.getMonth()]};a.shortMonthName=function(a){return m[a.getMonth()]};a.renderTimeNickname=function(a){return 0==a?"---":e(new Date(a))};a.renderDateNicknameNoTime=function(a){var b=new Date;if(c(a,b))return"Today";b.setDate(b.getDate()-1);if(c(a,b))return"Yesterday";var d=l[a.getMonth()]+" "+a.getDate();a.getFullYear()!=b.getFullYear()&&(d+=", "+a.getFullYear());return d};a.renderDateNickname=e;a.renderShortDateNickname=function(a){var d=new Date;
return c(a,d)?b(a):a.getFullYear()<d.getFullYear()?a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear().toString().slice(2):m[a.getMonth()]+" "+a.getDate()};a.renderMonthAndYear=function(a){if(0==a)return"";a=new Date(a);return l[a.getMonth()]+" "+a.getFullYear()};a.renderNumericDate=function(a){var b=new Date;return a.getFullYear()!=b.getFullYear()?a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear().toString().slice(2):a.getMonth()+1+"/"+a.getDate()};a.getDurationNicknameFromMs=function(a){var b=Math.floor(a/
1E3);if(60>b)return"0:"+d(b.toFixed(),2,"0");if(3600>b)return a=Math.floor(b/60).toString(),b=d((b%60).toFixed(),2,"0"),a+":"+b;var c=Math.floor(b/3600);a=d(Math.floor((b-3600*c)/60).toString(),2,"0");b=d((b%60).toFixed(),2,"0");return c.toString()+":"+a+":"+b};a.getDateInputCompatibleString=function(a){var b=a.getFullYear(),c=a.getMonth()+1,c=10>c?"0"+c:""+c;a=10>a.getDate()?"0"+a.getDate():""+a.getDate();return b+"-"+c+"-"+a};a.dateFromDateInputVal=function(a){var b=a.split("-");a=parseInt(b[0]);
var c=parseInt(b[1])-1,b=parseInt(b[2]),d=new Date;d.setFullYear(a,c,b);d.setHours(23,59,0);return d};a.longDurationString=function(a,b){if(0>a)return b;var c=a/36E5;if(23<c)return c=c/24|0,1==c?"1 day":c+" days";c|=0;return 1==c?"1 hour":c+" hours"};a.toggleClass=function(a,b,c){c?a.classList.add(b):a.classList.remove(b)};a.parseCookies=function(a){if(!a)return{};var b={};a.split("; ").forEach(function(a){var c=a.indexOf("=");0>c||(b[a.substring(0,c)]=decodeURIComponent(a.substring(c+1)))});return b};
a.setLastPage=function(a,b){if(b){var c=b.indexOf("://")+3,d;d="/"==b.charAt(b.length-1)?b.slice(c,b.length-1).split("/"):b.slice(c).split("/");c=0==b.slice(c).indexOf("www.");2<d.length?d=c?d[0].slice(4)+"/.../"+d[d.length-1]:d[0]+"/.../"+d[d.length-1]:(d=2==d.length?d[0]+"/"+d[1]:d[0],d=c?d.slice(4):d);a.setText(d);a.setAttr("title",b)}};a.walkToBody=function(a,b){for(var c=a;null!=c&&c!=document.body&&b(c);)c=c.parentNode};a.nearestElement=function(b){for(;b&&b.nodeType!=a.Node_ELEMENT_NODE;)b=
b.parentNode;return b};a.startsWith=k;a.endsWith=h;a.trimPrefix=function(a,b){return k(a,b)?a.substring(b.length):a};a.trimSuffix=function(a,b){return h(a,b)?a.substring(0,a.length-b.length):a};a.createStripeTokenAndSavePayment=function(a,b,c,d){var e=window.Stripe;e?(e.setPublishableKey(b),e.createToken(a,function(a,b){c(a,b)})):d("Sorry, Stripe client did not load.  They may be having network issues.  Please refresh and try again.")};a.selectedValue=function(a){return a.children[a.selectedIndex].value};
a.confirm=function(a,b,c){window.prompt(a+" \n\n To proceed, enter the text '"+b+"'.")==b?c():window.alert("No worries. Doing nothing.")};a.ensureUrlScheme=function(a){return-1==a.indexOf("//")?"http://"+a:a};var v=document.createElement("a");a.parseUrl=function(a){v.href=a;return{protocol:v.protocol,hostname:v.hostname,port:v.port,pathname:v.pathname,search:v.search,hash:v.hash}};a.numberWithCommas=function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};a.wordForSingleNumbers=function(a){switch(a){case 0:return"zero";
case 1:return"one";case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";case 9:return"nine";default:return String(a)}};var t={visa:"visa",amex:"amex",mastercard:"mastercard","american express":"amex",discover:"discover",diners:"diners","diners club":"diners"};a.cardType=function(a){a=a.toLowerCase();return t[a]?t[a]:"unknown"};a.formatCardNumber=function(a){a=a.replace(/[^0-9*]/g,"").slice(0,19);for(var b="",c=
0;c+4<a.length;)b+=a.substr(c,4)+" ",c+=4;return b+=a.substr(c)};a.pluralize=function(a,b){return 2>b?a:a+"s"};a.capitalize=function(a){return a[0].toLocaleUpperCase()+a.substring(1)};a.userErrorMessage=function(a,b,c){return 500>a&&b&&b.Message?b.Message:c};a.loadFromLocalStorage=function(a,b){return localStorage&&null!==localStorage.getItem(a)?localStorage.getItem(a):b};a.saveToLocalStorage=function(a,b){if(localStorage)try{localStorage.setItem(a,b)}catch(c){}};a.selectElemText=function(a){if(window.getSelection){var b=
document.createRange();b.selectNodeContents(a);window.getSelection().removeAllRanges();window.getSelection().addRange(b)}};a.removeClassByPrefix=function(a,b){for(var c=0;c<a.e.classList.length;c++){var d=a.e.classList[c];if(0==d.indexOf(b)){a.removeClass(d);break}}};a.segmentScriptAvailable=function(){return"undefined"!=typeof segment&&segment.EnableButton&&segment.EnableButton.url};var p=document.createElement("canvas").getContext("2d");a.measureString=function(a,b){p.font=b?b:'12px "Whitney SSm A", "Whitney SSm B", "Helvetica Neue", Arial, sans-serif';
return Number(p.measureText(a).width.toFixed())};a.scrollIfNotInView=function(a,b){var c=b.e.getBoundingClientRect(),d=a.e.getBoundingClientRect();(c.bottom>d.bottom||c.top<d.top)&&b.e.scrollIntoView(!1)};a.domainFromHost=function(a){var b=a.indexOf(":");0<=b&&(a=a.slice(0,b));return a};a.isLocalhost=function(a){return"localhost"==a||"127.0.0.1"==a}})(n||(n={}));(function(a){a.HighlightTypeFsId="fsidentity";a.HighlightTypeNewUid="newuid";a.UID_COOKIE="fs_uid";a.BAD_APP_IDS=" 0 1 -1 n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");
var g=function(){function f(a){void 0===a&&(a=document);this._doc=a;this._cookie=null;this._cookies={}}f.prototype.initFromCookies=function(c,d){for(var b=this._doc.cookie.split(";"),e=0;e<b.length;e++){var k=b[e].replace(/^\s+|\s+$/g,"").split("="),h=k[0];this._cookies[h]||(this._cookies[h]=k[1])}var l=this._cookies[a.UID_COOKIE],m=h=k=e=b="";if(l){var f=l.split("`");3>f.length?b=l:(k=f[0],h=f[1],b=f[2],5<=f.length&&(m=decodeURIComponent(f[3]),0<=a.BAD_APP_IDS.indexOf(m)&&(a.logIfDebug('ignoring invalid app key "'+
m+'" from cookie.'),m="")))}l=b.indexOf(":");-1!=l&&(e=b.slice(l+1),b=b.slice(0,l));this._cookie={Host:k,OrgId:h,UserId:b,SessionId:e,AppKey:m};if(this._cookie.Host!=c||this._cookie.OrgId!=d)this._cookie={Host:c,OrgId:d,UserId:"",SessionId:"",AppKey:""}};f.prototype.initFromParsedCookie=function(a){this._cookie=a};f.prototype.clear=function(){var a=this.host(),d=this.orgId();this._cookie={Host:a,OrgId:d,UserId:"",SessionId:"",AppKey:""};this.write()};f.prototype.host=function(){return this._cookie.Host};
f.prototype.orgId=function(){return this._cookie.OrgId};f.prototype.userId=function(){return this._cookie.UserId};f.prototype.sessionId=function(){return this._cookie.SessionId};f.prototype.appKey=function(){return this._cookie.AppKey};f.prototype.cookieData=function(){return this._cookie};f.prototype.cookies=function(){return this._cookies};f.prototype.setCookie=function(a,d){var b=a+"="+d,b=this._domain?b+("; domain=."+encodeURIComponent(this._domain)):b+"; domain=";this._doc.cookie=b+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};
f.prototype.setIds=function(c,d,b,e){a.isLocalhost(d)&&(d="");c=a._fs_cookie_domain(c);"string"==typeof c&&(d=c);this._domain=d;this._cookie.UserId=b;this._cookie.SessionId=e;this.write()};f.prototype.clearAppId=function(){if(!this._cookie.AppKey)return!1;this._cookie.AppKey="";this.write();return!0};f.prototype.setAppId=function(c){"number"==typeof c&&c===c>>0&&(c=""+c);if("string"!=typeof c)return a.logIfDebug("blocking FS.identify API call; uid value ("+c+") must be a string"),[!1,a.HighlightTypeFsId];
var d=c.trim();if(0<=a.BAD_APP_IDS.indexOf(d.toLowerCase()))return a.logIfDebug("blocking FS.identify API call; uid value ("+c+") is illegal"),[!1,a.HighlightTypeFsId];c=void 0;this._cookie.AppKey&&this._cookie.AppKey!=d&&(a.logIfDebug("user re-identified; existing uid ("+this._cookie.AppKey+") does not match provided uid ("+d+")"),c=a.HighlightTypeNewUid);this._cookie.AppKey=d;this.write();return[!0,c]};f.prototype.encode=function(){var a=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+
":"+this._cookie.SessionId;this._cookie.AppKey&&(a+="`"+encodeURIComponent(this._cookie.AppKey)+"`");return a};f.prototype.write=function(){null!=this._domain&&this.setCookie(a.UID_COOKIE,this.encode())};return f}();a.Identity=g})(n||(n={}));(function(a){var g=function(){function f(a){this._identity=a;this.AccountSystemVars={acctId:"str",displayName:"str",website:"str"};this.UserSystemVars={uid:"str",displayName:"str",email:"str"};this.VarTypes={str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==
typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return a?!isNaN(a.constructor===Date?a:new Date(a)):!1}}}f.prototype.identity=function(){return this._identity};f.prototype.drainApiQueue=function(a){if(a){for(var d=[],b=0;b<a.length;b++){var e=this.api(a[b][0],a[b][1]),k=e[0];e[1]&&(d=[]);d=d.concat(k)}return d}};f.prototype.api=function(c,d){var b=!1,e=[];switch(c){case "account":e=e.concat(this.setvar_api("acct",
this.AccountSystemVars,d));break;case "user":if("uid"in d){var k=d.uid;if(!1===k)this._identity.clearAppId()&&(b=!0),delete d.uid;else{var k=this._identity.setAppId(k),h=k[1];if(!k[0]){switch(h){case a.HighlightTypeFsId:e.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:[a.HighlightTypeFsId,d.uid+""]});break;case void 0:break;default:a.logIfDebug("unexpected failReason returned from setAppId: "+h)}return[e,!1]}h==a.HighlightTypeNewUid&&(b=!0)}}e=e.concat(this.setvar_api("user",this.UserSystemVars,d));
break;default:a.logIfDebug('invalid operation "'+c+'"; only "account" and "user" are supported at present')}return[e,b]};f.prototype.setvar_api=function(c,d,b){var e=[],k={},h;for(h in b)if(b.hasOwnProperty(h)){var l=b[h];a.logIfDebug("set-var('"+c+"'): \""+h+'" = '+a.stringify(l));var m=typeof l;if("object"!==m||l&&l.constructor==Date){var f,g;if(h in d)f=h,g=d[h];else{g=h.split("_");if(2!=g.length){a.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');
e.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",c+":"+h]});continue}-1!=h.indexOf(" ")?(f=h.replace(/ /g,""),e.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",c+":"+h]}),a.logIfDebug("Warning: variable '"+h+"' has spaces in it, which is disallowed. Converted name to '"+f+"'.")):f=h;g=g[1]}g in this.VarTypes?this.VarTypes[g](l)?("str"==g&&(l=l.trim()),"date"==g&&(l=this.toIsoString(l)),k[f]=l):(a.logIfDebug("illegal value "+a.stringify(l)+" for type "+g),"number"===m?m=0==l-Math.floor(l)?
"integer":"real":"object"==m&&(null!=l&&l.constructor==Date)&&(m=isNaN(l)?"invalid date":"date"),e.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",c+":"+h,m]})):(a.logIfDebug('invalid type "'+g+'"'),e.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",c+":"+h]}))}else l instanceof Array&&(m="array"),e.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",c+":"+h,m+" (unsupported)"]})}e.push({When:0,Kind:a.EVENT_SYS_SETVAR,Args:[c,a.stringify(k)]});return e};f.prototype.toIsoString=
function(a){return(a.constructor===Date?a:new Date(a)).toISOString()};return f}();a.Vars=g})(n||(n={}));var D;(function(a){var g=/(?:[^\\](?:\\\\)*)/.source;a.CSS_URL=RegExp('url\\(\\s*"(.*?'+g+")\"\\s*\\)|url\\(\\s*'(.*?"+g+")'\\s*\\)|url\\((.*?"+g+")\\)","g");a.QUOTES=/\"|'/g;a.HOVER=/\:hover/g;a.FOCUS=/\:focus/g;a.MEDIA_QUERY=/(@media.*?{)/g;a.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;a.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/;a.IPv4_PART=/^[0-9]{1,3}$/;a.IPv6_PART=/^[0-9a-f]{0,4}$/;
a.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/;a.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.IMAGE_FILENAME=/\.(jpe?g|png|svg|gif|bmp)$/;a.ATTR_SELECTOR=/\[.*\]/g;a.SVG_NS=/svg\:/g})(D||(D={}));(function(a){var g=function(){function a(c,b){this.parent=c;this.combinator=b;this.classes={};this.attrs={};this.attrMatch={}}a.prototype.cssEscapeIdent=function(a){var b=function(a){return-1!=
"[]:./\\()@#%^&*'\" ".indexOf(a)?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "};return"-"==a?"\\-":"-"==a[0]?"-"+a.slice(1).replace(/([^0-9a-zA-Z-_])/g,b):a.replace(/[^0-9a-zA-Z-_:]/g,b)};a.prototype.cssEscapeString=function(a){return'"'+a.replace(/[\x01-\x1f\"\\]/g,function(a){return'"'==a||"\\"==a?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "})+'"'};a.prototype.serialize=function(){var a=this.combinator?this.combinator:"";this.tag&&(a+="*"==this.tag?this.tag:this.cssEscapeIdent(this.tag));this.id&&
(a+="#"+this.cssEscapeIdent(this.id));var b=Object.keys(this.classes);b.sort();for(var c=0;c<b.length;c++)a+="."+this.cssEscapeIdent(b[c]);for(var k in this.attrs)a=""==this.attrMatch[k]?a+("["+this.cssEscapeIdent(k)+"]"):a+("["+this.cssEscapeIdent(k)+this.attrMatch[k]+this.cssEscapeString(this.attrs[k])+"]");return a};return a}();a.SelectorRule=g;var f=function(){function a(c){this.rules=c}a.parse=function(d,b,e){void 0===b&&(b=null);d=d.trim();var k=new g(null,null),h=0,l=!1,m=function(){throw"Invalid selector";
},f=function(){r=d[++h];if("\n"==r||null==r)throw m();if(r.match(/[0-9a-fA-F]/)){var a="";do a+=r,r=d[++h];while(r&&r.match(/[0-9a-fA-F]/));r&&r.match(/[\s]/)&&h++;return String.fromCharCode(parseInt(a,16))}h++;return r},t=function(a){for(var b=h,c="",e;null!=(e=d[h]);)if("\\"==e)c+=f();else if(e.match(a?/[a-zA-Z0-9_:\-]/:/[a-zA-Z0-9_\-]/)||128<e.charCodeAt(0))c+=e,h++;else break;if(b==h)throw m();return c},p=function(){for(;null!=d[h]&&d[h].match(/\s/);)h++},q=function(){l=!0;h++;var a=t().toLowerCase();
try{var c;p();var e=d[h],g="=";if("*"==e||"|"==e||"^"==e||"$"==e||"~"==e)g=e+"=",h++;if(b&&!b[g])throw m();if("="!=d[h])throw m();h++;p();c=g}catch(q){if(b&&!b["[]"]||"Invalid selector"!=q)throw q;if("]"!=d[h])throw m();h++;k.attrs[a]=k.attrMatch[a]="";return}r=d[h];'"'==r||"'"==r?(e=r,h++):e="]";for(g="";(r=d[h])!=e;){if(null==r)throw m();if("\\"==r)g+=f();else{if("]"==e&&('"'==r||"'"==r))throw m();g+=r;h++}}h++;"]"!=e&&"]"==d[h]&&h++;k.attrs[a]=g;k.attrMatch[a]=c},s=function(){if(!l)throw m();l=
!1;p();var a=d[h];">"==a||"+"==a||"~"==a?(h++,p()):a=" ";k=new g(k,a);if(b&&!b[a])throw m();};if(0==d.indexOf("//"))throw m();for(var n=0,h=0;h<d.length;){if(n++>2*d.length)throw console.log("Likely caught in an infinite loop while parsing "+d),"Internal error, infinite loop";var r=d[h];switch(r){case "#":l=!0;h++;k.id=t();break;case "*":if(l)throw m();l=!0;k.tag="*";if(b&&!b["*"])throw m();h++;break;case ".":l=!0;h++;k.classes[t()]=!0;break;case "[":q();break;case " ":case ">":case "+":case "~":s();
break;case ":":throw m();default:if(l)throw m();l=!0;k.tag=t(e).toLowerCase()}}if(!l)throw m();return new a(k)};a.prototype.serialize=function(){for(var a=null,b=this.rules;b;b=b.parent)a=a?b.serialize()+a:b.serialize();return a};return a}();a.Selector=f})(n||(n={}));(function(a){function g(a){var c={};if(!a)return c;if(a.classList)for(var d=0;d<a.classList.length;++d)c[a.classList[d]]=!0;else if(a.className)for(a=(null!=a.className.animVal?a.className.animVal:a.className).split(" "),d=0;d<a.length;++d)c[a[d].trim()]=
!0;return c}a.NYI_KIND="nyi";a.BLOCKED_KIND="blocked";a.HIDE_KIND="hide";var f=function(){function a(b,c){this._parent=b;this._rule=c}a.prototype.parent=function(){return this._parent};a.prototype.matches=function(c,d){if(!c||this._rule.tag&&c.tagName.toLowerCase()!=this._rule.tag||this._rule.id&&c.id!=this._rule.id)return!1;for(var h in this._rule.classes)if(!(h in d))return!1;for(var l in this._rule.attrs)if(h=c.getAttribute(l),null==h||!a.attrPredicates[this._rule.attrMatch[l]](h,this._rule.attrs[l]))return!1;
return this._parent?this._parent.matches(c.parentElement,g(c.parentElement)):!0};return a}();f.attrPredicates={"":function(a,c){return!0},"=":function(a,c){return a==c},"*=":function(a,c){return-1<a.indexOf(c)},"^=":function(a,c){return 0==a.lastIndexOf(c,0)},"$=":function(a,c){return a.indexOf(c,a.length-c.length)+c.length==a.length},"~=":function(a,c){return-1<a.split(/\s+/).indexOf(c)},"|=":function(a,c){return-1<a.split("-").indexOf(c)}};a.BlockRuleElem=f;var c=function(){function b(b){this.kind=
b.Kind;this.selector=a.Selector.parse(b.Selector,{">":!0,"=":!0,"[]":!0,"*=":!0,"^=":!0,"$=":!0,"~=":!0,"|=":!0});var c=function(a){return new f(a.parent?c(a.parent):null,a)};this.rules=c(this.selector.rules)}b.isComment=function(a){return!!a.match(/^\s*\/\//)};b.prototype.serialize=function(){return this.selector.serialize()};return b}();a.BlockRule=c;var d=function(){function a(){this._rules=[];this._predicateRules=[];this.rawRules=[]}a.prototype.isBlocked=function(a){for(var b=0;b<this._predicateRules.length;++b)if(this._predicateRules[b].Selector(a))return this._predicateRules[b].Kind;
for(var c=g(a),b=0;b<this._rules.length;++b)if(this._rules[b].rules.matches(a,c))return this._rules[b].kind;return null};a.prototype.addRule=function(a){this._rules.push(new c(a));this.rawRules.push(a)};a.prototype.addPredicateRule=function(a){this._predicateRules.push(a)};a.prototype.mungeBlockedStyle=function(a,b){var c=a.getBoundingClientRect(),d=Math.floor(c.width),c=Math.floor(c.height);if("object"==a.tagName.toLowerCase())for(var m=a.children,f=0;f<m.length;f++){var g=m[f];if("embed"==g.tagName.toLowerCase()){m=
g.getBoundingClientRect();d=Math.max(d,Math.floor(m.width));c=Math.max(c,Math.floor(m.height));break}}m="";null!=b&&(m=b.trim());0<m.length&&";"!=m.charAt(m.length-1)&&(m+=";");if(0!=d||0!=c)m+="width:"+d+"px;height:"+c+"px;";return m};return a}();a.Blocker=d})(n||(n={}));(function(a){a.MutationProcessingInterval=250;a.CurveSamplingInterval=142;a.UploadInterval=5E3;a.UserInactivityTimeout=1E4;a.HeartbeatInitial=4E3;a.HeartbeatMax=256E3;a.PageInactivityTimeout=18E5;a.BackoffMax=3E5;a.ScrollSampleInterval=
a.MutationProcessingInterval/5;a.InactivityThreshold=4E3})(n||(n={}));(function(a){var g=function(){function a(c,b,e){this._ctx=c;this._q=b;this._valueIndices=e;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};a.prototype.finish=function(a,b){var c=this._evts.length;if(1>=c)return!1;for(var k=this._evts[0].When,h=this._evts[c-1].When,l=0;l<this._valueIndices.length;++l){var m=this._valueIndices[l],f=this._evts[0].Args[m],g=(this._evts[1].When-k)/
(h-k),p=(this._evts[1].Args[m]-f)/g,q=this._evts[c-1].Args[m],g=(h-this._evts[c-2].When)/(h-k);b.push(f,q,p,(q-this._evts[c-2].Args[m])/g)}this._evts[0].Kind=a;this._evts[0].Args=b;return!0};a.prototype.evts=function(){return this._evts};return a}(),f=function(){function c(a){this._ctx=a;this._gotInitialScroll=!1}c.prototype.processQueue=function(c){if(0==c.length)return c;this._ctx.maybeAddInitialScroll();for(var b=this._ctx.now(),e=[],k=new g(this._ctx,e,[0,1]),h={},l={},m,f=0;f<c.length;++f){var n=
c[f];switch(n.Kind){case a.EVENT_MOUSEMOVE:k.add(n);break;case a.EVENT_TOUCHMOVE:var p=n.Args[0];p in h||(h[p]=new g(this._ctx,e,[1,2]));h[p].add(n);break;case a.EVENT_SCROLL:p=n.Args[0];p in l||(l[p]=new g(this._ctx,e,[1,2]));l[p].add(n);break;case a.EVENT_INNERWIDTH:m||(m=new g(this._ctx,e,[0]));m.add(n);break;default:e.push(n)}}k.finish(a.EVENT_MOUSEMOVE_CURVE,[b])&&(c=k.evts(),k=c[c.length-1].Args,2<k.length&&k[2]&&c[0].Args.push(k[2]));for(p in l)c=parseInt(p),l[c].finish(a.EVENT_SCROLL_CURVE,
[b,c]);for(p in h)c=parseInt(p),h[c].finish(a.EVENT_TOUCHMOVE_CURVE,[b,c]);m&&m.finish(a.EVENT_INNERWIDTH_CURVE,[b]);return e};return c}();a.EventProcessor=f})(n||(n={}));(function(a){function g(){var e,h;try{throw Error("");}catch(l){e="<generated>\n",h=l.stack||l.backtrace||l.stacktrace}if(!h){e="<generated-ie>\n";h=[];try{for(var m=arguments.callee.caller.caller;m&&h.length<c;){var f=b.test(m.toString())?RegExp.$1||d:d;h.push(f);m=m.caller}}catch(g){a.logIfDebug(g)}h=h.join("\n")}return e+h}function f(a,
b){var c=window.location.origin,d=(new Date).getTime(),e;try{e=window.self!==window.top}catch(f){e=!0}var c={projectRoot:c,"metaData[device][time]":d,"metaData[misc][inIframe]":e,context:document.location.pathname,message:a.message,name:"Recording Error",payloadVersion:3,releaseStage:"production",severity:b,notfierVersion:"3.2.0",language:"en-GB",stacktrace:a.stack||(a.backtrace||a.stacktrace)||g(),apiKey:"38f089fdedbe27e3ca594fb18cdbc78e",ct:"img",cb:(new Date).getTime()},d=[],p;for(p in c)d.push(encodeURIComponent(p)+
"="+encodeURIComponent(c[p]));(new Image).src="https://notify.bugsnag.com/js?"+d.sort().join("&")}var c=10,d="[anonymous]",b=/function\s*([\w\-$]+)?\s*\(/i;a.sendToBugsnag=f;var e={};a.assert=function(a,b,c){void 0===c&&(c=1);a||(e[b]=e[b]||0,e[b]++,e[b]>c||f(Error("Assertion failed: "+b),"error"))}})(n||(n={}));(function(a){function g(b,c){return a.stringify({__fs:[b,c?c:""]})}function f(b){return a.isLocalhost(a.domainFromHost(b))?b:0==b.indexOf("www.")?"r."+b.slice(4):"r."+b}function c(b,c){var d=
Math.min(a.BackoffMax,5E3*Math.pow(2,b));return c?d+0.25*Math.random()*d:d}function d(a){return 400<=a||202==a?!0:!1}function b(a,b,c,d,e,k,h){a="/rec/bundle?OrgId="+a+"&UserId="+b+"&SessionId="+c+"&PageId="+d+"&Seq="+e.Seq;k&&(a+="&PageStartTime="+k);h&&(a+="&DeltaT="+h);return a}var e=function(){function b(a,c){void 0===c&&(c=new k);this._wnd=a;this._messagePoster=c}b.prototype.enqueueEvents=function(b){this._messagePoster.postMessage(this._wnd.parent,a.FS_IFRAME_EVENTS,b)};b.prototype.startPipeline=
function(a){};b.prototype.stopPipeline=function(){};b.prototype.flush=function(){};b.prototype.singSwanSong=function(){};return b}();a.PostMessageEventTransport=e;var k=function(){function b(){}b.prototype.postMessage=function(b,c,d){var e;try{e=a._fs_transport(b)}catch(k){}e?e.send(c,a.stringify(d)):b.postMessage(g(c,d),"*")};return b}();a.PostMessagePoster=k;a.formatPostMessageData=g;a.bundleHost=f;e=function(){function c(b,d,e,k,l){void 0===e&&(e=a.RealTicker);void 0===k&&(k=a.RealTimeout);void 0===
l&&(l=new h);this._ctx=b;this._onShutdown=d;this._tickerFactory=e;this._timeoutFactory=k;this._poster=l;this._backoffTime=this._backoffRetries=this._byteCount=0;this._bundleSeq=1;this._lastPostTime=0;this._outgoingEventQueue=[];this._bundleQueue=[];this._bundleHost=f(b.getHost());this._protocol=b.getProtocol();this._identity=b.getIdentity();this._lastBundleTime=b.wallTime();this._uploadTicker=new this._tickerFactory(a.UploadInterval);this._swanSong=new a.SwanSong(b,this,k)}c.prototype.protocol=function(){return this._protocol};
c.prototype.enqueueEvents=function(a){this._outgoingEventQueue=this._outgoingEventQueue.concat(a)};c.prototype.startPipeline=function(a){var b=this;this._pageId=a;this.enqueueAndSendBundle();this._uploadTicker.start(function(){b.enqueueAndSendBundle()})};c.prototype.stopPipeline=function(){this._uploadTicker.stop();this._outgoingEventQueue=[];this._bundleQueue=[]};c.prototype.flush=function(){this.maybeSendNextBundle()};c.prototype.singSwanSong=function(){0<this._outgoingEventQueue.length&&this.enqueueNextBundle(!0);
if(0<this._bundleQueue.length||this._pendingBundle){var a=this._bundleQueue.concat();this._pendingBundle&&a.unshift(this._pendingBundle);this._swanSong.sing(this._pageId,a,this._lastBundleTime)}};c.prototype.sendSwanSongBundle=function(a,c,d,e,k,h,l,f,g){void 0===g&&(g=null);a=b(a,c,d,e,k,h,l);this.post(a,k,f,g)};c.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()};
c.prototype.enqueueNextBundle=function(b){void 0===b&&(b=!1);var c={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[];this._bundleQueue.push(c);b&&this._poster.sendBeacon(this._protocol,this._bundleHost,this.bundleUrl(c),a.stringify(c))||this.maybeSendNextBundle()};c.prototype.maybeSendNextBundle=function(){this._pageId&&(!this._pendingBundle&&0!=this._bundleQueue.length)&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())};
c.prototype._sendPendingBundle=function(){var b=this,c=this._ctx.wallTime();if(!(c<this._backoffTime)){var e=this._pendingBundle;this._pendingBundleFailed=!1;this._lastPostTime=this._lastBundleTime=c;this.sendBundle(e,function(c){a.logIfDebug("Sent bundle "+e.Seq+" with "+e.Evts.length+" events");b._pendingBundle=null;b._backoffTime=0;b._backoffRetries=0;b._ctx.wallTime()-b._lastPostTime>a.UploadInterval&&b.maybeSendNextBundle()},function(c){a.logIfDebug("Failed to send events.");d(c)?b._onShutdown():
(b._pendingBundleFailed=!0,b._backoffTime=b._lastPostTime+b._poster.exponentialBackoffMs(b._backoffRetries++,!1))})}};c.prototype.sendBundle=function(a,b,c){void 0===c&&(c=null);this.post(this.bundleUrl(a),a,b,c)};c.prototype.bundleUrl=function(a){return b(this._identity.orgId(),this._identity.userId(),this._identity.sessionId(),this._pageId,a)};c.prototype.post=function(b,c,d,e){void 0===e&&(e=null);var k=null;null!=c&&(k=a.stringify(c),this._byteCount+=k.length,a.logIfDebug("total bytes written: "+
this._byteCount));this._poster.post(this._protocol,this._bundleHost,b,k,d,e)};return c}();a.HttpEventTransport=e;var h=function(){function b(){}b.prototype.post=function(b,c,d,e,k,h){void 0===h&&(h=null);c="//"+c+d;var f=!1,l=new XMLHttpRequest;if("withCredentials"in l)l.onreadystatechange=function(){if(l.readyState==a.XHR_DONE&&!f){f=!0;try{200==l.status?k(l.responseText):h(l.status)}catch(b){a.sendToBugsnag(b,"error")}}},l.open("POST",b+c,!0),l.withCredentials=!0,l.setRequestHeader("Content-Type",
"text/plain"),l.send(e);else{var g=new XDomainRequest;g.onload=function(){k(g.responseText)};g.onerror=function(){h("Not Found"==g.responseText?404:500)};g.onprogress=function(){};g.open("POST",c);g.send(e)}};b.prototype.sendBeacon=function(a,b,c,d){return"function"==typeof navigator.sendBeacon?(navigator.sendBeacon(a+"//"+b+c,d),!0):!1};b.prototype.exponentialBackoffMs=function(a,b){return c(a,b)};return b}();a.XHRPoster=h;a.exponentialBackoffMs=c;a.isErrorFatal=d})(n||(n={}));(function(a){var g=
function(){function a(){this.dict={idx:-1,map:{}};this.nodeCount=1;this.startIdx=0}a.prototype.encode=function(c){function d(){e?1<l.length?k.push([e.idx,l.length]):k.push(e.idx):k.push(l[0])}if(0==c.length)return[];for(var b=c[0],e=Object.prototype.hasOwnProperty.call(this.dict.map,b)?this.dict.map[b]:null,k=[],h,l=[b],b=1;b<c.length;b++)if(h=c[b],e&&Object.prototype.hasOwnProperty.call(e.map,h))l.push(h),e=e.map[h];else{d();var m=this.startIdx+b-l.length;null==e&&this.nodeCount<a.MAX_NODES&&(e=
{idx:m,map:{}},this.dict.map[l[l.length-1]]=e,this.nodeCount++);this.nodeCount<a.MAX_NODES&&(e.map[h]={idx:m,map:{}},this.nodeCount++);l=[h];e=Object.prototype.hasOwnProperty.call(this.dict.map,h)?this.dict.map[h]:null}d();this.startIdx+=c.length;return k};return a}();g.MAX_NODES=1E4;a.LZJGWEncoder=g;g=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var d=this._seq.length,b=0;b<a.length;++b){var e=a[b];switch(typeof e){case "string":this._seq.push(e);
break;case "number":this._seq.push(this._seq[e]);break;case "object":for(var k=0;k<e[1];k++)this._seq.push(this._seq[e[0]+k])}}return d};return a}();a.LZJGWDecoder=g})(n||(n={}));(function(a){var g=function(){function f(c,d,b){void 0===b&&(b=a.RealTimeout);this._ctx=c;this._transport=d;this._timeoutFactory=b;this._recover();this._identity=c.getIdentity()}f.prototype.sing=function(c,d,b){a.logIfDebug("Saving "+d.length+" bundles in swan-song.");c={OrgId:this._identity.orgId(),UserId:this._identity.userId(),
SessionId:this._identity.sessionId(),PageId:c,Bundles:d,PageStartTime:this._ctx.startTime(),LastBundleTime:b};try{localStorage.singSwanSong=a.stringify(c)}catch(e){}};f.prototype._recover=function(){try{if("singSwanSong"in localStorage){var c=localStorage.singSwanSong;delete localStorage.singSwanSong;var d=a.parseJson(c);d.Bundles&&d.UserId&&d.SessionId&&d.PageId?(d.OrgId||(d.OrgId=this._identity.orgId()),0<d.Bundles.length&&(a.logIfDebug("Sending "+d.Bundles.length+" bundles as prior page swan song"),
this.sendSwanSongBundles(d.OrgId,d.UserId,d.SessionId,d.PageId,d.PageStartTime,d.Bundles,d.LastBundleTime))):a.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(b){a.logIfDebug("Error recovering swan-song: "+b)}};f.prototype.sendSwanSongBundles=function(c,d,b,e,k,h,l,f){var g=this;void 0===f&&(f=0);var n=null;a.isArray(h)&&(0!==h.length&&void 0!==h[0])&&(1==h.length&&(n=this._ctx.wallTime()-l),this._transport.sendSwanSongBundle(c,d,b,e,h[0],k,n,function(f){a.logIfDebug("Sent "+h[0].Evts.length+
" trailing events from last session as Seq "+h[0].Seq);a.windex.Array.prototype.shift.call(h);0<h.length?g.sendSwanSongBundles(c,d,b,e,k,h,l):a.logIfDebug("Done with prior page swan song")},function(p){a.isErrorFatal(p)?a.logIfDebug("Fatal error while sending events, giving up"):(a.logIfDebug("Failed to send events from last session, will retry while on this page"),g._lastSwanSongRetryTimeout=new g._timeoutFactory(g.sendSwanSongBundles,a.exponentialBackoffMs(f,!0),g,c,d,b,e,k,h,l,f+1))}))};return f}();
a.SwanSong=g})(n||(n={}));(function(a){var g=function(){function a(b){this._interval=b;this._handle=-1}a.prototype.start=function(a){-1==this._handle&&(this._handle=setInterval(a,this._interval))};a.prototype.stop=function(){-1!=this._handle&&(clearInterval(this._handle),this._handle=-1)};return a}();a.RealTicker=g;var f=function(){function c(b,d,k){void 0===d&&(d=0);for(var h=[],l=3;l<arguments.length;l++)h[l-3]=arguments[l];this.delay=d;this.timer=-1;this.handler=a.bind.apply(void 0,[b,void 0===
k?window:k].concat(h));this.timer=setTimeout(this.handler,d);this.args=h}c.prototype.cancel=function(){clearTimeout(this.timer);this.timer=-1};c.prototype.reset=function(a){void 0===a&&(a=this.delay);this.delay=a;clearTimeout(this.timer);this.timer=setTimeout(this.handler,this.delay)};return c}();a.RealTimeout=f;var c=function(){function c(b,d,k,h,l){void 0===k&&(k=function(){return[]});void 0===h&&(h=g);void 0===l&&(l=f);var m=this;this._ctx=b;this._transport=d;this._gatherExternalEvents=k;this._tickerFactory=
h;this._timeoutFactory=l;this._recordingDisabled=!1;this._lastWhen=-1;this._lastUserAction=0;this._hibernating=this._quiescent=!1;this._lastHeartbeat=0;this._heartbeatInterval=a.HeartbeatInitial;this._gotUnload=!1;this._eventQueue=[];this._sampleCurvesTicker=new this._tickerFactory(a.CurveSamplingInterval);this._processMutationsTicker=new this._tickerFactory(a.MutationProcessingInterval);this._hibernationTimeout=new this._timeoutFactory(function(){m.hibernate()},a.PageInactivityTimeout,this);this._processor=
new a.EventProcessor(b)}c.prototype.startPipeline=function(a,c,d){var h=this;this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=c,this._parentIds=d,this._lastUserAction=this._ctx.now(),this.processEvents(),this._processMutationsTicker.start(function(){h.processEvents()}),this._sampleCurvesTicker.start(function(){h.processEvents(!0)}),this._transport.startPipeline(a))};c.prototype.enqueue=function(a,c){this.enqueueAt(this._ctx.now(),a,c)};c.prototype.enqueueAt=
function(b,c,d){this._hibernating&&a.isUserActionEvent(c)?this._ctx.splitPage():this._recordingDisabled||(b<=this._lastWhen&&(b=this._lastWhen+1),this._lastWhen=b,this._eventQueue.push({When:b,Kind:c,Args:d}),a.isUserActionEvent(c)&&(this._lastUserAction=b,this._hibernationTimeout.reset()))};c.prototype.hibernate=function(){this.shutdown();this._hibernating=!0};c.prototype.enqueueFirst=function(a,c){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a,Args:c}):
this.enqueue(a,c)};c.prototype.addUnload=function(){this._gotUnload||(this._gotUnload=!0,this.enqueue(a.EVENT_UNLOAD,[]),this._lastUserAction=this._ctx.now(),this.singSwanSong())};c.prototype.shutdown=function(){this._flush();this.addUnload();this._flush();this._recordingDisabled=!0;this.stopPipeline();this._hibernationTimeout.cancel()};c.prototype._flush=function(){this.processEvents();this._transport.flush()};c.prototype.prequeue=function(a,c){this._recordingDisabled||this._eventQueue.unshift({When:0,
Kind:a,Args:c})};c.prototype.appendToQueue=function(a){this._eventQueue=this._eventQueue.concat(a)};c.prototype.singSwanSong=function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())};c.prototype.rebaseIframe=function(a){for(var c=0,d=this._eventQueue.length;c<d;c++){var h=this._eventQueue[c],l=h.When+this._ctx.startTime()-a;0>l&&(l=0);h.When=l}};c.prototype.processEvents=function(b){if(this._pipelineStarted&&!this._hibernating&&(this._ctx.now()-this._lastUserAction>
a.UserInactivityTimeout?this._quiescent||(this._quiescent=!0,this._heartbeatInterval=a.HeartbeatInitial,this._lastHeartbeat=this._ctx.now()):this._quiescent=!1,!this._quiescent||this.maybeSendHeartbeat())){var c=this._eventQueue;this._eventQueue=[];c=this._processor.processQueue(c);b||(c=c.concat(this._gatherExternalEvents()));this.ensureFrameIds(c);0!=c.length&&this._transport.enqueueEvents(c)}};c.prototype.maybeSendHeartbeat=function(){var b=this._ctx.now();return b-this._lastHeartbeat>=this._heartbeatInterval?
(this._lastHeartbeat=b,this._heartbeatInterval*=2,this._heartbeatInterval>a.HeartbeatMax&&(this._heartbeatInterval=a.HeartbeatMax),this.enqueue(a.EVENT_HEARTBEAT,[]),!0):!1};c.prototype.ensureFrameIds=function(a){if(this._frameId)for(var c=this._parentIds,d=c&&0<c.length,h=0;h<a.length;++h){var l=a[h];l.FId||(l.FId=this._frameId);d&&!l.PIds&&(l.PIds=c)}};c.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=
[],this._transport.stopPipeline())};return c}();a.EventQueue=c})(n||(n={}));(function(a){var g=function(){function f(a,d){this._queue=a;this._wnd=d;this._overflow=this._enabled=!1;this._total=0}f.prototype.enable=function(){var c=this;c._enabled||(c._enabled=!0,this._wnd.console?(console.log&&console.log.apply&&(c._oldLog=console.log,console.log=a.$entry(function(){c.addLog("log",arguments);return c._oldLog.apply(this,arguments)})),console.info&&console.info.apply&&(c._oldInfo=console.info,console.info=
a.$entry(function(){c.addLog("info",arguments);return c._oldInfo.apply(this,arguments)})),console.warn&&console.warn.apply&&(c._oldWarn=console.warn,console.warn=a.$entry(function(){c.addLog("warn",arguments);return c._oldWarn.apply(this,arguments)})),console.error&&console.error.apply&&(c._oldError=console.error,console.error=a.$entry(function(){c.addLog("error",arguments);return c._oldError.apply(this,arguments)}))):c.addLog("log",["NOTE: Log messages cannot be captured on IE9"]),c._oldOnError=
this._wnd.onerror,this._wnd.onerror=function(a,b,e){c.addError(a,b,e);if(c._oldOnError)return c._oldOnError.apply(this,arguments)})};f.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._oldLog&&(console.log=this._oldLog),this._oldInfo&&(console.info=this._oldInfo),this._oldWarn&&(console.warn=this._oldWarn),this._oldError&&(console.error=this._oldError),this._wnd.onerror=this._oldOnError)};f.prototype.addLog=function(c,d){if(this.checkOverflow()){for(var b=[c],e=0;e<d.length;++e)b.push(a.stringify(d[e],
1E3));this._queue.enqueue(a.EVENT_LOG,b)}};f.prototype.addError=function(c,d,b){this.checkOverflow()&&("object"==typeof c&&(c=a.stringify(c,1E3)),"object"==typeof d&&(d=a.stringify(d,100)),"object"==typeof b&&(b=-1),this._queue.enqueue(a.EVENT_ERROR,[c,d,b]))};f.prototype.checkOverflow=function(){if(this._overflow)return!1;if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,["warn",f.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};return f}();g.OVERFLOW_MSG='"[received more than '+
a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';a.ConsoleWatcher=g})(n||(n={}));(function(a){function g(a,c){var d=Object.getOwnPropertyDescriptor(a.prototype,c);Object.defineProperty(a.prototype,c,{set:function(a){var c=this;setTimeout(function(){b&&b(c)},0);return d.set.call(this,a)},get:function(){return d.get.call(this)}})}function f(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return(a=a.value)||(a=""),""+a}}var c=function(){function c(d,e){var l=this;
this._onchange=d;this._checkElem=e;this._fallback=!1;this._elems={};this._values={};b=function(b){var c=a.fsid(b);if(c&&(b=l._elems[c])){var d=f(b);d!=l._values[c]&&(l._onchange(b),l._values[c]=d)}}}c.prototype.hookEvents=function(){var a;(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(d||(g(HTMLInputElement,"value"),g(HTMLInputElement,"checked"),g(HTMLSelectElement,"value"),g(HTMLTextAreaElement,"value"),d=!0),a=!0):a=!1;a||(this._fallback=!0)};c.prototype.addInput=
function(b){var c=a.fsid(b);this._elems[c]=b;this._values[c]=f(b);a:switch(b.type){case "checkbox":case "radio":c=b.checked!=b.hasAttribute("checked");break a;default:var c=b.value||"",d=b.getAttribute("value")||"",c=c!=d}c&&this._onchange(b)};c.prototype.invokeGlobalOnChange=function(a){b&&b(a)};c.prototype.tick=function(){for(var a in this._elems)if(!this._checkElem(this._elems[a]))delete this._elems[a],delete this._values[a];else if(this._fallback){var b=this._elems[a],c=f(b);c!=this._values[a]&&
(this._onchange(b),this._values[a]=c)}};c.prototype.shutdown=function(){b=null};c.prototype._usingFallback=function(){return this._fallback};c.prototype._trackingElem=function(a){return!!this._elems[a]};return c}();a.InputWatcher=c;var d=!1,b;a.valueOfInputishElem=f})(n||(n={}));(function(a){function g(a){return"_fsblocked"in a}function f(a){return a._fsblocked}function c(a,b){a._fsblocked=b}function d(b,c){if(g(b.node))for(var d=b,e=b.parent;e;e=e.parent){e.blockedChildSet=e.blockedChildSet||{};
for(var h in d.blockedChildSet)delete e.blockedChildSet[h];e.blockedChildSet[d.id]=d;if(a.hasNKeys(e.blockedChildSet,2))d=e;else if(a.hasMoreThanNKeys(e.blockedChildSet,2))break}}function b(a){return a?a._fs:null}function e(a){return(a=b(a))?a.id:0}function k(a,b,c){h(b);c=c||a.lastChild;b.parent=a;if(b.prev=c)d=[b,c.next],c.next=d[0],b.next=d[1];null==b.prev?a.child=b:b.prev.next=b;null==b.next?a.lastChild=b:b.next.prev=b;var d}function h(b){if(b.parent){if(a.hasMoreThanNKeys(b.blockedChildSet,0)||
g(b.node))for(var c=a.hasNKeys(b.blockedChildSet,1)?a.firstKey(b.blockedChildSet):b.id,d=c&&b.parent;d&&d.blockedChildSet&&d.blockedChildSet[c];){delete d.blockedChildSet[c];if(a.hasNKeys(d.blockedChildSet,1)){for(var c=d.id,e=a.firstValue(d.blockedChildSet),d=d.parent;d&&d.blockedChildSet&&d.blockedChildSet[c];)delete d.blockedChildSet[c],d.blockedChildSet[e.id]=e,d=d.parent;break}d=d.parent}b.parent.child==b&&(b.parent.child=b.next);b.parent.lastChild==b&&(b.parent.lastChild=b.prev);b.prev&&(b.prev.next=
b.next);b.next&&(b.next.prev=b.prev);b.parent=b.prev=b.next=null;b.id=0;b.child&&l(b.child)}}function l(a){for(a=[a];0<a.length&&1E4>a.length;){var b=a.pop();b.id=0;b.next&&a.push(b.next);b.child&&a.push(b.child)}}function m(a,b){if(a.attributes&&0<a.attributes.length)for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];b(d.name,d.value)}}function n(a,b,c,d){if("class"==b&&0>c.indexOf("_fs_block_"))c+=" _fs_block_"+f(a);else if("type"==b&&"object"==a.tagName.toLowerCase()||"value"==b||"checked"==
b||"src"==b||"data"==b||"alt"==b)c=null;return c}a.isBlocked=g;a.blockKind=f;a.setBlocked=c;a.mirrorFor=b;a.fsid=e;a.fsidIfNotBlocked=function(a){return g(a)?0:e(a)};a.removeMirror=h;a.clearIds=l;var t=function(){function e(a){this._blocker=a;this._curId=1}e.prototype.curId=function(){return this._curId};e.prototype.tokenizeNode=function(a,c,d,e){var h=this._curId;try{var k=b(a),l=b(c);a=[];this.tokeNode(k,l,d,a,e);return a}catch(f){return this._curId=h,[]}};e.prototype.tokeNode=function(b,c,e,h,
l){if("SCRIPT"==e.nodeName||e.nodeType==a.Node_COMMENT_NODE)return null;var f={id:this._curId++,node:e};e._fs=f;b&&k(b,f,c);b=e.nodeName;"http://www.w3.org/2000/svg"==e.namespaceURI&&(b="svg:"+b);h.push("<"+b);try{var g=this.processBlockedElem(e,h);if(g)return d(f,g),f;l&&l(e);m(e,function(a,b){h.push(":"+a);h.push(b)});if(e.firstChild){h.push("[");for(var g=null,n=e.firstChild;n;n=n.nextSibling){var u=this.tokeNode(f,g,n,h,l);u&&(g=u)}h.push("]")}e.nodeType==a.Node_TEXT_NODE&&h.push(e.textContent)}catch(v){}return f};
e.prototype.processBlockedElem=function(b,d){var e=this;if(b.nodeType==a.Node_ELEMENT_NODE&&this._blocker){var h=this._blocker.isBlocked(b);if(h){c(b,h);var k,l=!1;m(b,function(a,c){c=n(b,a,c,e._blocker);"class"==a?k=!0:"style"==a&&(l=!0);null!=c&&(d.push(":"+a),d.push(c))});k||(d.push(":class"),d.push("_fs_block_"+h));l||(d.push(":style"),d.push(this._blocker.mungeBlockedStyle(b,"")));return h}}return null};return e}();a.NodeEncoder=t;a.rewriteBlockedAttribute=n})(n||(n={}));(function(a){function g(){q=
!1;var a=s;s=[];a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();f(a);c.length&&(a.callback_(c,a),b=!0)});b&&g()}function f(a){a.nodes_.forEach(function(b){(b=m.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function c(a,b){for(var c=a;c;c=c.parentNode){var d=m.get(c);if(d)for(var e=0;e<d.length;e++){var h=d[e],k=h.options;(c===a||k.subtree)&&(k=b(k))&&h.enqueue(k)}}}function d(a){this.callback_=a;this.nodes_=[];this.records_=
[];this.uid_=++y}function b(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}function e(a){if(w)return w;var c=r,d=new b(c.type,c.target);d.addedNodes=c.addedNodes.slice();d.removedNodes=c.removedNodes.slice();d.previousSibling=c.previousSibling;d.nextSibling=c.nextSibling;d.attributeName=c.attributeName;d.attributeNamespace=c.attributeNamespace;d.oldValue=c.oldValue;w=d;w.oldValue=
a;return w}function k(a,b,c){this.observer=a;this.target=b;this.options=c;this.transientObservedNodes=[]}a.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||d;var h=Object.defineProperty,l=Date.now()%1E9,m=new (window.WeakMap||function(){var a=function(){this.name="__st"+(1E9*Math.random()>>>0)+(l++ +"__")};a.prototype={set:function(a,b){var c=a[this.name];c&&c[0]===a?c[1]=b:h(a,this.name,{value:[a,b],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:
void 0}};return a}()),n=window.setImmediate||window.msSetImmediate;if(!n){var t=[],p=String(Math.random());window.addEventListener("message",function(a){a.data===p&&(a=t,t=[],a.forEach(function(a){a()}))});n=function(a){for(var b=1;b<arguments.length;b++);t.push(a);window.postMessage(p,"*");return 0}}var q=!1,s=[],y=0;d.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||
b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var c=m.get(a);c||m.set(a,c=[]);for(var d,e=0;e<c.length;e++)if(c[e].observer===this){d=c[e];d.removeListeners();d.options=b;break}d||(d=new k(this,a,b),c.push(d),this.nodes_.push(a));d.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=m.get(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.observer===this){c.removeListeners();a.splice(b,1);break}}},this);
this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var r,w;k.prototype={enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var d=b[c-1];d=d===a?d:!w||d!==w&&d!==r?null:w;if(d){b[c-1]=d;return}}else s.push(this.observer),q||(q=!0,n(g));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",
this,!0);b.childList&&a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",
this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=m.get(a);b||m.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=m.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},handleEvent:function(a){switch(a.type){case "DOMAttrModified":var d=a.attrName,h=a.relatedNode.namespaceURI,
k=a.target,l=r=new b("attributes",k);l.attributeName=d;l.attributeNamespace=h;var f=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;c(k,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(d)||-1!==a.attributeFilter.indexOf(h)))return a.attributeOldValue?e(f):l});break;case "DOMCharacterDataModified":k=a.target;l=r=new b("characterData",k);f=a.prevValue;c(k,function(a){if(a.characterData)return a.characterDataOldValue?e(f):l});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);
case "DOMNodeInserted":var k=a.relatedNode,g=a.target,m;"DOMNodeInserted"===a.type?(a=[g],m=[]):(a=[],m=[g]);var n=g.previousSibling,g=g.nextSibling,l=r=new b("childList",k);l.addedNodes=a;l.removedNodes=m;l.previousSibling=n;l.nextSibling=g;c(k,function(a){if(a.childList)return l})}r=w=void 0}}})(n||(n={}));(function(a){var g=function(){function f(c,d,b){void 0===b&&(b=function(a,b){});this._ctx=c;this._blocker=d;this._visitor=b;this._sentDomSnapshot=!1;this._records=[];this._blockedDims={};this._wnd=
c.getWindow();this._encoder=new a.NodeEncoder(d)}f.prototype.hookMutations=function(c){var d=this;void 0===c&&(c=this._wnd.document.documentElement);this._root=c;this._sentDomSnapshot=!1;this._lz=new a.LZJGWEncoder;this._observer=new a.MutationObserver(function(a){d._records=d._records.concat(a)});this._observer.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};f.prototype.shutdown=function(){this._observer&&this._observer.disconnect();
var c=a.mirrorFor(this._root);c&&a.clearIds(c);this._records=[]};f.prototype.processMutations=function(){if(!this._root)return[];var c=this._ctx.now(),d=[];this._sentDomSnapshot||(this.genInsert(c,d,null,this._root,null),this.resizeRelatedBlockedElements(c,d,this._root),this._sentDomSnapshot=!0);if(0==this._records.length)return d;var b={},e={};this.processRecords(c,d,e,b);for(var k in e){var h=k.split(":");d.push({Kind:a.EVENT_MUT_ATTR,When:c,Args:[parseInt(h[0]),h[1],e[k]]})}for(k in b)d.push({Kind:a.EVENT_MUT_TEXT,
When:c,Args:[parseInt(k),b[k]]});this._records=[];return d};f.prototype.processRecords=function(c,d,b,e){for(var k={},h={},l=0;l<this._records.length;++l)try{var f=this._records[l],g=a.fsid(f.target);if(g)switch(k[g]=f.target,f.type){case "childList":if(0<f.removedNodes.length)for(var n=0;n<f.removedNodes.length;++n){var p=a.mirrorFor(f.removedNodes[n]);p&&p.id&&p.parent==a.mirrorFor(f.target)&&p.next==a.mirrorFor(f.nextSibling)&&this.genRemove(c,d,p)}g&&(h[g]=f.target);break;case "characterData":var q=
f.target.textContent;f.oldValue!=q&&(a.isBlocked(f.target)||(e[g]=q));break;case "attributes":var s=f.attributeName;f.target.hasAttribute(s)?(q=f.target.getAttribute(s),f.oldValue!=q&&(q=this.rewriteAttr(f.target,s,q),null!==q&&(b[g+":"+s]=q))):b[g+":"+s]=null}}catch(y){}for(var r in h)b=h[r],(e=a.mirrorFor(b))&&e.id&&this.diff(c,d,b,e.child,b.firstChild);for(r in k)b=k[r],this.resizeRelatedBlockedElements(c,d,b)};f.prototype.diff=function(c,d,b,e,k){for(var h=[];e&&k;){var f=a.mirrorFor(k);a.fsid(k)?
e.id==f.id?(e=e.next,k=k.nextSibling):(h.push({remove:e}),e=e.next):(h.push({insert:[b,k,e.node]}),k=k.nextSibling)}for(;e;e=e.next)h.push({remove:e});for(;k;k=k.nextSibling)h.push({insert:[b,k,null]});for(b=0;b<h.length;b++)e=h[b],e.insert?this.genInsert(c,d,e.insert[0],e.insert[1],e.insert[2]):e.remove&&this.genRemove(c,d,e.remove)};f.prototype.resizeRelatedBlockedElements=function(c,d,b){var e=a.mirrorFor(b);if(e){b=[e];for(e=0;b.length&&1E3>++e;){var k=b.pop();if(a.isBlocked(k.node))this.addPlaceholderResize(c,
d,k.node);else if(k.blockedChildSet)for(var h in k.blockedChildSet)a.windex.Object.prototype.hasOwnProperty.call(k.blockedChildSet,h)&&b.push(k.blockedChildSet[h])}a.assert(1E3>e,"Searching for blocked descendants is fast")}else{for(;b&&!a.fsid(b);)b=b.parentNode;b&&a.isBlocked(b)&&this.addPlaceholderResize(c,d,b)}};f.prototype.addPlaceholderResize=function(c,d,b){try{var e=b.getBoundingClientRect(),k=Math.floor(e.width),h=Math.floor(e.height),f=a.fsid(b),g=this._blockedDims[f];g&&g.w==k&&g.h==h||
(this._blockedDims[f]={w:k,h:h},d.push({When:c,Kind:a.EVENT_PLACEHOLDER_SIZE,Args:[f,k,h]}))}catch(n){}};f.prototype.genInsert=function(c,d,b,e,k){var h=this;if(b&&a.isBlocked(b))return null;var f=a.fsid(b)||-1,g=a.fsid(k)||-1;b=this._encoder.tokenizeNode(b,k,e,function(a){h._visitor(c,a)});0<b.length&&d.push({When:c,Kind:a.EVENT_MUT_INSERT,Args:[f,g,this._lz.encode(b)]})};f.prototype.genRemove=function(c,d,b){var e=b.id;a.removeMirror(b);if(0<d.length&&(b=d[d.length-1],b.Kind==a.EVENT_MUT_REMOVE)){b.Args.push(e);
return}d.push({When:c,Kind:a.EVENT_MUT_REMOVE,Args:[e]})};f.prototype.rewriteAttr=function(c,d,b){a.isBlocked(c)&&(b=a.rewriteBlockedAttribute(c,d,b,this._blocker));return b};return f}();a.MutationWatcher=g})(n||(n={}));(function(a){a.gatherPerformanceStats=function(){for(var a=[],f=0,c="connectEnd connectStart domComplete domContentLoadedEventEnd domContentLoadedEventStart domInteractive domLoading domainLookupEnd domainLookupStart fetchStart loadEventEnd loadEventStart navigationStart redirectEnd redirectStart requestStart responseEnd responseStart secureConnectionStart unloadEventEnd unloadEventStart".split(" ");f<
c.length;f++){var d=performance.timing[c[f]],d=void 0==d?-1:d;a.push(d)}return a}})(n||(n={}));(function(a){var g=function(){function f(c,d,b,e){var k=this;this._ctx=c;this._queue=d;this._blocker=b;this._onFrameCreated=e;this._clientHeight=this._clientWidth=this._curWindowScrollY=this._curWindowScrollX=-1;this._curInnerWidth=0;this._scrollTimeouts={};this._quirks=!1;this._listeners=new a.DomListeners;this._initialized=!1;this._wnd=c.getWindow();this._doc=this._wnd.document;this._loc=this._wnd.location;
this._hst=this._wnd.history;this._quirks="BackCompat"==this._doc.compatMode;this._currentUrl=this._loc.href;this._inputWatcher=new a.InputWatcher(function(a){k.addChangeElem(a)},function(b){return!!a.fsid(b)});this._mutWatcher=new a.MutationWatcher(c,b,function(a,b){k.visitNode(a,b)})}f.prototype.onDomLoad=function(){var c=this;this.addPerformanceData();this.addDomLoaded();this.addResize();this._mutWatcher.hookMutations();this._inputWatcher.hookEvents();this._scrollListener=this._listeners.add(this.docElem(),
"scroll",!0,function(a){c.addScroll(a)});this._listeners.add(this._wnd,"mousemove",!0,function(a){c.addMouseMove(a)});this._listeners.add(this._wnd,"mousedown",!0,function(a){c.addMouseDown(a)});this._listeners.add(this._wnd,"mouseup",!0,function(a){c.addMouseUp(a)});this._listeners.add(this._wnd,"keydown",!0,function(a){c.addKeyDown(a)});this._listeners.add(this._wnd,"keyup",!0,function(a){c.addKeyUp(a)});this._listeners.add(this._wnd,"click",!0,function(a){c.addClick(a)});this._listeners.add(this._wnd,
"dblclick",!0,function(a){c.addDblClick(a)});this._listeners.add(this._wnd,"focus",!0,function(a){c.addFocus(a)});this._listeners.add(this._wnd,"blur",!0,function(a){c.addBlur(a)});this._listeners.add(this._wnd,"change",!0,function(a){c.addChange(a)});this._listeners.add(this._wnd,"touchstart",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHSTART);c.addWindowScroll()});this._listeners.add(this._wnd,"touchend",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHEND);c.addWindowScroll()});this._listeners.add(this._wnd,
"touchmove",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHMOVE);c.addWindowScroll()});this._listeners.add(this._wnd,"touchcancel",!0,function(b){c.addTouchEvent(b,a.EVENT_TOUCHCANCEL)});this._listeners.add(this._wnd,"play",!0,function(b){c.addPlayPauseEvent(b,a.EVENT_PLAY)});this._listeners.add(this._wnd,"pause",!0,function(b){c.addPlayPauseEvent(b,a.EVENT_PAUSE)});this._listeners.add(this._wnd,"scroll",!1,function(a){c.addWindowScroll()});this._listeners.add(this._wnd,"resize",!1,function(a){c.addResize()});
this._listeners.add(this._wnd,"submit",!1,function(a){c.addFormSubmit(a)});this._listeners.add(this._wnd,"focus",!1,function(a){c.addWindowFocus(a)});this._listeners.add(this._wnd,"blur",!1,function(a){c.addWindowBlur(a)});this._listeners.add(this._wnd,"popstate",!1,function(){c.addNavigate()});this._hst.pushState&&(this._pushHook=a.activateHook(this._hst,"pushState").afterSync(function(){return c.addNavigate()}),this._replaceHook=a.activateHook(this._hst,"replaceState").afterSync(function(){return c.addNavigate()}));
var d=this._wnd.navigator.userAgent;-1<d.indexOf("MSIE ")||(-1<d.indexOf("Trident/")||-1<d.indexOf("Edge/"))||this.shimDocumentWrite();this._initialized=!0};f.prototype.unShimDocumentWrite=function(){this._docOpenHook&&this._docOpenHook.disable();this._docWriteHook&&this._docWriteHook.disable();this._docWritelnHook&&this._docWritelnHook.disable();this._docCloseHook&&this._docCloseHook.disable()};f.prototype.shimDocumentWrite=function(){var c=this,d=this._mutWatcher,b=function(b,e){var k=a.mirrorFor(b);
if(k){var f=[];d.genRemove(e,f,k);k=f[0];c._queue.enqueueAt(k.When,k.Kind,k.Args)}},e=function(a){a.oldEl=this.documentElement;a.now=c._ctx.now()},k=function(e){if(this.documentElement!=e.oldEl){d.hookMutations();var k=[];b(e.oldEl,e.now);k.push({Kind:a.EVENT_SET_FRAME_BASE,When:e.now,Args:[a.baseUri(this),a.doctypeString(this)]},{Kind:a.EVENT_DOMLOADED,When:e.now,Args:[]});c._listeners.remove(c._scrollListener);c._scrollListener=c._listeners.add(c.docElem(),"scroll",!0,function(a){c.addScroll(a)});
k.push.apply(k,d.processMutations());for(e=0;e<k.length;e++){var f=k[e];c._queue.enqueueAt(f.When,f.Kind,f.Args)}}};this._docOpenHook=a.activateHook(this._wnd.document,"open").before(e).afterSync(function(a){!this.documentElement&&a.oldEl&&b(a.oldEl,a.now)});this._docWriteHook=a.activateHook(this._wnd.document,"write").before(e).afterAsync(k);this._docWritelnHook=a.activateHook(this._wnd.document,"writeln").before(e).afterAsync(k);this._docCloseHook=a.activateHook(this._wnd.document,"close").before(e).afterAsync(k)};
f.prototype.onLoad=function(){this.addLoad();0!=this._clientWidth&&0!=this._clientHeight||this.addResize()};f.prototype.bundleEvents=function(){this._inputWatcher.tick();this.addWindowInnerWidth();return this._mutWatcher.processMutations()};f.prototype.shutdown=function(){this._initialized&&(this._initialized=!1,this._listeners.clear(),this._pushHook&&this._pushHook.disable(),this._replaceHook&&this._replaceHook.disable(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown(),this.unShimDocumentWrite())};
f.prototype.docElem=function(){return this._doc.documentElement};f.prototype.visitNode=function(c,d){switch(d.nodeName){case "INPUT":case "TEXTAREA":case "SELECT":this._inputWatcher.addInput(d);break;case "FRAME":case "IFRAME":this._onFrameCreated(d);break;case "VIDEO":case "AUDIO":d.paused||this.addPlayPauseEventById(a.fsid(d),a.EVENT_PLAY)}};f.prototype.addMouseMove=function(c){c=a.fsid(c.target)?[c.clientX,c.clientY,a.fsid(c.target)]:[c.clientX,c.clientY];this._queue.enqueue(a.EVENT_MOUSEMOVE,
c)};f.prototype.addMouseDown=function(c){this._queue.enqueue(a.EVENT_MOUSEDOWN,[c.clientX,c.clientY])};f.prototype.addMouseUp=function(c){this._queue.enqueue(a.EVENT_MOUSEUP,[c.clientX,c.clientY])};f.prototype.addTouchEvent=function(a,d){if(void 0!==a.changedTouches)for(var b=0;b<a.changedTouches.length;++b){var e=a.changedTouches[b];isNaN(parseInt(e.identifier))&&(e.identifier=0);this._queue.enqueue(d,[e.identifier,e.clientX,e.clientY])}};f.prototype.addPlayPauseEvent=function(c,d){var b=a.fsid(c.target);
b&&this.addPlayPauseEventById(b,d)};f.prototype.addPlayPauseEventById=function(a,d){this._queue.enqueue(d,[a])};f.prototype.addWindowFocus=function(c){this._queue.enqueue(a.EVENT_WINDOW_FOCUS,[])};f.prototype.addWindowBlur=function(c){this._queue.enqueue(a.EVENT_WINDOW_BLUR,[])};f.prototype.maybeAddValueChange=function(){var a=this._doc.activeElement;a&&this._inputWatcher.invokeGlobalOnChange(a)};f.prototype.addKeyDown=function(c){var d=this._doc.activeElement;if(!d||a.fsidIfNotBlocked(d))this.maybeAddValueChange(),
this._queue.enqueue(a.EVENT_KEYDOWN,[c.keyCode])};f.prototype.addKeyUp=function(c){var d=this._doc.activeElement;if(!d||a.fsidIfNotBlocked(d))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYUP,[c.keyCode])};f.prototype.addWindowInnerWidth=function(){var c=this._wnd.innerWidth;c!=this._curInnerWidth&&(this._queue.enqueue(a.EVENT_INNERWIDTH,[c]),this._curInnerWidth=c)};f.prototype.doWorkInScrollTimeout=function(c,d){var b=this;c in this._scrollTimeouts||(this._scrollTimeouts[c]=d,setTimeout(function(){if(c in
b._scrollTimeouts){var a=b._scrollTimeouts[c];delete b._scrollTimeouts[c];a()}},a.ScrollSampleInterval))};f.prototype._fireScrollTimeouts=function(){for(var a in this._scrollTimeouts)this._scrollTimeouts[a](),delete this._scrollTimeouts[a];this._scrollTimeouts=[]};f.prototype.addWindowScroll=function(){var c=this,d=a.fsid(this._doc.body);d&&this.doWorkInScrollTimeout(d,function(){var b,e;"pageXOffset"in c._wnd?(b=c._wnd.pageXOffset,e=c._wnd.pageYOffset):(b=c._doc.body.scrollLeft,e=c._doc.body.scrollTop);
if(b!=c._curWindowScrollX||e!=c._curWindowScrollY)c._queue.enqueue(a.EVENT_SCROLL,[d,b,e]),c._curWindowScrollX=b,c._curWindowScrollY=e;c.addWindowInnerWidth()})};f.prototype.addScroll=function(c){var d=this,b=c.target,e=a.fsid(b);e&&this.doWorkInScrollTimeout(e,function(){d._queue.enqueue(a.EVENT_SCROLL,[e,b.scrollLeft,b.scrollTop])})};f.prototype.addResize=function(){var c,d;this._quirks?(c=this._doc.body.clientWidth,d=this._doc.body.clientHeight):(c=this.docElem().clientWidth,d=this.docElem().clientHeight);
if(c!=this._clientWidth||d!=this._clientHeight)this._clientWidth=c,this._clientHeight=d,c=Math.max(this._wnd.innerWidth||-1,this._clientWidth),this.isMediaValue("width",c)||(c=this.findMediaValue("width",c,c+128)||c),d=Math.max(this._wnd.innerHeight,this._clientHeight),this.isMediaValue("height",d)||(d=this.findMediaValue("height",d,d+128)||d),c==this._clientWidth&&d==this._clientHeight?this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight]):this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,
this._clientHeight,c,d])};f.prototype.isMediaValue=function(a,d){return this._wnd.matchMedia?this._wnd.matchMedia("(min-"+a+": "+d+"px)").matches&&this._wnd.matchMedia("(max-"+a+": "+d+"px)").matches:!0};f.prototype.findMediaValue=function(a,d,b){if(!this._wnd.matchMedia)return 0;for(;d<b;){var e=Math.floor((d+b)/2);if(this._wnd.matchMedia("(min-"+a+": "+e+"px)").matches){if(this._wnd.matchMedia("(max-"+a+": "+e+"px)").matches)return e;d=e+1}else b=e-1}return 0};f.prototype.addDomLoaded=function(){this._queue.enqueue(a.EVENT_DOMLOADED,
[])};f.prototype.addLoad=function(){this._queue.enqueue(a.EVENT_LOAD,[])};f.prototype.addPerformanceData=function(){window.performance&&this._queue.enqueue(a.NAVIGATION_TIMING,a.gatherPerformanceStats())};f.prototype.addNavigate=function(){var c=this._loc.href;this._currentUrl!=c&&(this._currentUrl=c,this._queue.enqueue(a.EVENT_NAVIGATE,[this._loc.href,this._doc.title]))};f.prototype.addClick=function(c){var d=c.target,b=a.fsid(d);b&&(d=d.getBoundingClientRect(),this._queue.enqueue(a.EVENT_CLICK,
[b,c.clientX,c.clientY,d.left,d.top,d.width,d.height]))};f.prototype.addDblClick=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_DBL_CLICK,[c])};f.prototype.addFormSubmit=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_FORM_SUBMIT,[c])};f.prototype.addFocus=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_FOCUS,[c])};f.prototype.addBlur=function(c){(c=a.fsid(c.target))&&this._queue.enqueue(a.EVENT_BLUR,[c])};f.prototype.addChange=function(a){this._inputWatcher.invokeGlobalOnChange(a.target)};
f.prototype.addChangeElem=function(c){var d=a.fsidIfNotBlocked(c);d&&this._queue.enqueue(a.EVENT_VALUECHANGE,[d,a.valueOfInputishElem(c)])};return f}();a.EventWatcher=g})(n||(n={}));(function(a){function g(b){try{var c=a.parseJson(b);if("__fs"in c)return c.__fs}catch(d){}return[]}function f(a){var b=a.src;return!a.hasAttribute("src")||"about:blank"==b||0==b.indexOf("javascript:")||0==b.indexOf(c)}a.FS_REQUEST_FRAME_ID="RequestFrameId";a.FS_SET_FRAME_ID_CMD="SetFrameId";a.FS_IFRAME_EVENTS="EvtBundle";
a.FS_SHUTDOWN_FRAME="ShutdownFrame";a.FS_RESTART_FRAME="RestartFrame";var c=location.protocol+"//"+location.host;a.defaultInjector=function(b,c,d,f){a.logIfDebug("Injecting into Frame ["+b.src+"]");try{if(b.src&&("about:blank"!=b.src&&0>b.src.indexOf("javascript:"))&&b.src!=b.contentWindow.location.href)a.logIfDebug("Frame not yet loaded: "+b.src);else if(b.contentWindow[a.Namespace(b.contentWindow)])a.logIfDebug("FS already defined in Frame contentWindow: "+b.src+". Ignoring.");else{var g=b.contentWindow,
n=b.contentDocument;g._fs_org=c;g._fs_host=d;g._fs_debug=a.isDebug();g._fs_run_in_iframe=!0;var t=n.createElement("script");t.async=!0;t.src=f+"//"+d+"/s/fs.js";n.head.appendChild(t)}}catch(p){a.logIfDebug("iFrame no injecty. Probably not same origin.")}};var d;(function(a){a[a.NoInfoYet=1]="NoInfoYet";a[a.Enabled=2]="Enabled";a[a.Disabled=3]="Disabled"})(d=a.GetCurrentSessionEnabledState||(a.GetCurrentSessionEnabledState={}));var b=function(){function b(c,d,e,f){var g=this;this._ctx=c;this._injector=
f;this._iFrames=[];this._pendingChildFrameIdInits=[];this._listeners=new a.DomListeners;this._blocker=new a.Blocker;this._transport=e(c,function(){g.shutdown()});this._queue=new a.EventQueue(c,this._transport,function(){return g._eventWatcher.bundleEvents()},d);this._eventWatcher=new a.EventWatcher(c,this._queue,this._blocker,function(a){g.onFrameCreated(a)});this._consoleWatcher=new a.ConsoleWatcher(this._queue,c.getWindow());this._protocol=c.getProtocol();this._host=c.getHost();this._orgId=c.getOrgId();
this._identity=c.getIdentity();this._wnd=c.getWindow()}b.prototype.start=function(b){var c=this;this._onFullyStarted=b;this._blocker.addPredicateRule({Selector:function(a){return"object"!=a.tagName.toLowerCase()?!1:!(D.IMAGE_FILENAME.test(a.data)&&(void 0===a.type||0==a.type.lastIndexOf("image",0)))},Kind:a.NYI_KIND});this._blocker.addRule({Selector:"embed",Kind:a.NYI_KIND});this._blocker.addRule({Selector:"canvas",Kind:a.NYI_KIND});this._blocker.addRule({Selector:"noscript",Kind:a.BLOCKED_KIND});
this._blocker.addRule({Selector:".fs-hide",Kind:a.HIDE_KIND});this._consoleWatcher.enable();"onpagehide"in this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(a){c._queue.addUnload()}):this._listeners.add(this._wnd,"unload",!1,function(a){c._queue.addUnload()});this._listeners.add(this._wnd,"message",!1,function(a){"string"==typeof a.data&&c.postMessageReceived(a.source,g(a.data))})};b.prototype.getCurrentSessionEnabled=function(){return d.Disabled};b.prototype.queue=function(){return this._queue};
b.prototype.eventWatcher=function(){return this._eventWatcher};b.prototype.console=function(){return this._consoleWatcher};b.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()};b.prototype.onLoad=function(){this._eventWatcher.onLoad()};b.prototype.shutdown=function(){this._queue.shutdown();this._eventWatcher.shutdown();this._consoleWatcher.disable();this._listeners.clear();this.tellAllFramesTo([a.FS_SHUTDOWN_FRAME])};b.prototype.tellAllFramesTo=function(b){for(var c=0;c<this._iFrames.length;c++){var d=
this._iFrames[c].contentWindow;d&&d.postMessage&&d.postMessage(a.stringify({__fs:b}),"*")}};b.prototype.fullyStarted=function(){this._onFullyStarted()};b.prototype.flushPendingChildFrameInits=function(){if(0<this._pendingChildFrameIdInits.length){for(var a=0;a<this._pendingChildFrameIdInits.length;a++)this._pendingChildFrameIdInits[a]();this._pendingChildFrameIdInits=[]}};b.prototype.onFrameCreated=function(b){var c=this,d=a.fsid(b);d?(this._iFrames.push(b),f(b)?(a.logIfDebug("Attempting to setup Frame ["+
b.src+"]"),this._injector(b,this._orgId,this._host,this._protocol),b.addEventListener("load",function(d){a.logIfDebug("onload for frame ["+b.src+"]");c._injector(b,c._orgId,c._host,c._protocol)})):(a.logIfDebug("Frame Doesn't need injecting. Probably cross domain ["+b.src+"]"),b.contentWindow.postMessage&&(a.logIfDebug("Eagerly sending FrameId "+d+" to Frame ["+b.src+"]"),this.sendFrameIdToInnerFrame(b.contentWindow,d)))):a.logIfDebug("fsid missing or invalid for iFrame."+b.src)};b.prototype.postMessageReceived=
function(b,c){switch(c[0]){case a.FS_IFRAME_EVENTS:var d=c[1];0<d.length&&this._transport.enqueueEvents(d);break;case a.FS_REQUEST_FRAME_ID:d=this.iFrameWndToFsId(b),b&&d?(a.logIfDebug("Responding to FID request for frame "+d),this.sendFrameIdToInnerFrame(b,d)):a.logIfDebug("No FrameId found. Hoping to send one later.")}};b.prototype.sendFrameIdToInnerFrame=function(b,c){var d=this,e=function(){var e=[];0!=d._frameId&&(e=d._parentIds?d._parentIds.concat(d._frameId):[d._frameId]);e=[a.FS_SET_FRAME_ID_CMD,
c,e,d._ctx.startTime(),d._blocker.rawRules,d._identity.cookieData(),d._pageId];b&&b.postMessage&&b.postMessage(a.stringify({__fs:e}),"*")};null==this._frameId?this._pendingChildFrameIdInits.push(e):e()};b.prototype.iFrameWndToFsId=function(b){for(var c=0;c<this._iFrames.length;c++)if(this._iFrames[c].contentWindow==b)return a.fsid(this._iFrames[c]);a.logIfDebug("Unable to locate frame for window");return NaN};return b}();a.AbstractRecorder=b;a.parsePostMessageData=g})(n||(n={}));(function(a){a.CompiledTimestamp=
1496697767;a.CompiledVersion="UNSET"})(n||(n={}));(function(a){function g(c,d){return new a.HttpEventTransport(c,d)}var f=function(c){function d(b,d,f,h,l){void 0===d&&(d=a.RealTicker);void 0===f&&(f=new a.XHRPoster);void 0===h&&(h=g);void 0===l&&(l=a.defaultInjector);var m=c.call(this,b,d,h,l)||this;m._poster=f;m._domLoaded=!1;m._doc=m._wnd.document;m._frameId=0;m._getCurrentSessionEnabled=a.GetCurrentSessionEnabledState.NoInfoYet;a.set_fs_shutdown(m._wnd,function(a){m._queue.shutdown();a&&(a=m._doc.getElementById(a))&&
a.setAttribute("_fs_embed_token",m._embedToken)});return m}E(d,c);d.prototype.getCurrentSessionEnabled=function(){return this._getCurrentSessionEnabled};d.prototype.onDomLoad=function(){c.prototype.onDomLoad.call(this);this._domLoaded=!0;this.injectIntegrationScript()};d.prototype.start=function(b){var d=this;c.prototype.start.call(this,b);var f=this._doc.documentElement;b=a._fs_replay_flags(this._wnd);var h=a.tryGetScreenDims(this._wnd),g=h[0],h=h[1],f={OrgId:this._identity.orgId(),UserId:this._identity.userId(),
Url:location.href,Base:a.baseUri(this._doc),Width:f.clientWidth,Height:f.clientHeight,ScreenWidth:g,ScreenHeight:h,Referrer:this._doc.referrer,Doctype:a.doctypeString(this._doc),CompiledTimestamp:a.CompiledTimestamp};b&&(f.ReplayFlags=b);this._poster.post(this._protocol,this._host,"/rec/page",a.stringify(f),function(b){var c;try{c=a.parseJson(b)}catch(f){d.disableBecauseRecPageSaidSo();return}d.handleResponse(c);if(b=a._fs_ready(d._wnd))try{b()}catch(h){a.logIfDebug("exception in _fs_ready(): "+h)}for(b=
0;b<c.Blocks.length;++b)try{a.BlockRule.isComment(c.Blocks[b].Selector)||d._blocker.addRule(c.Blocks[b])}catch(g){a.logIfDebug("Unexpected error parsing block rule. Skipping "+c.Blocks[b])}d._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(d._doc),a.doctypeString(d._doc)]);d._queue.startPipeline(c.PageIntId);d.fullyStarted()},function(a){d.disableBecauseRecPageSaidSo()})};d.prototype.setIdsAndCookie=function(b){var c=this._identity;c.setIds(this._wnd,b.CookieDomain,b.UserIntId,b.SessionIntId);
this._pageId=b.PageIntId;this._embedToken=b.EmbedToken;a.logIfDebug("/User,"+c.userId()+"/Session,"+c.sessionId()+"/Page,"+b.PageIntId)};d.prototype.injectIntegrationScript=function(){if(this._domLoaded&&this._integrationScript){var b=this._doc.createElement("script");a._fs_csp(this._wnd)?b.src=this._protocol+this._host+"/rec/integrations?OrgId="+this._orgId:b.text=this._integrationScript;b.async=!0;this._doc.head.appendChild(b)}};d.prototype.handleResponse=function(b){this.setIdsAndCookie(b);this._integrationScript=
b.IntegrationScript;this._getCurrentSessionEnabled=b.GetCurrentSessionEnabled?a.GetCurrentSessionEnabledState.Enabled:a.GetCurrentSessionEnabledState.Disabled;this.injectIntegrationScript()};d.prototype.disableBecauseRecPageSaidSo=function(){this.shutdown();a.logIfDebug("Disabling FS.");var b=a._fs_ready(this._wnd);if(b)try{b(!0)}catch(c){a.logIfDebug("exception in _fs_ready(): "+c)}};return d}(a.AbstractRecorder);a.TopRecorder=f})(n||(n={}));(function(a){function g(c,d){return new a.PostMessageEventTransport(c.getWindow())}
a.makeFrameTransport=g;var f=function(c){function d(b,d,f,h,l){void 0===d&&(d=a.RealTicker);void 0===f&&(f=new a.PostMessagePoster);void 0===h&&(h=g);void 0===l&&(l=a.defaultInjector);b=c.call(this,b,d,h,l)||this;b._messagePoster=f;return b}E(d,c);d.prototype.start=function(a){c.prototype.start.call(this,a);this.sendRequestForFrameId()};d.prototype.postMessageReceived=function(b,d){c.prototype.postMessageReceived.call(this,b,d);switch(d[0]){case a.FS_SET_FRAME_ID_CMD:try{this.setFrameIdFromOutside(d[1],
d[2],d[3],d[4],d[5],d[6])}catch(f){a.logIfDebug("Failed to parse frameId from message"+d)}}};d.prototype.sendRequestForFrameId=function(){this._frameId||(0==this._frameId?a.logIfDebug("For some reason the outer window attempted to request a frameId"):(a.logIfDebug("Asking for a frame ID from within frame: "+location.href),this._messagePoster.postMessage(this._wnd.parent,a.FS_REQUEST_FRAME_ID,null)))};d.prototype.setFrameIdFromOutside=function(b,c,d,f,g,m){if(b)if(this._frameId)a.logIfDebug("frame Id is already set to "+
this._frameId+". Received second request to set it to "+b+" Iframe:"+location.href);else{a.logIfDebug("FrameId received within frame "+location.href+": "+b);this._identity.initFromParsedCookie(g);this._frameId=b;this._parentIds=c;for(g=0;g<f.length;++g)this._blocker.addRule(f[g]);this._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(this._wnd.document),a.doctypeString(this._wnd.document)]);this._queue.rebaseIframe(d);this._ctx.setStartTime(d);this._pageId=m;this._queue.startPipeline(m,b,c);this.flushPendingChildFrameInits();
this.fullyStarted()}else a.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+location.href)};return d}(a.AbstractRecorder);a.InnerRecorder=f})(n||(n={}));(function(a){var g=function(){function c(){}c.prototype.createTopRecorder=function(c){return new a.TopRecorder(c)};c.prototype.createInnerRecorder=function(c){return new a.InnerRecorder(c)};return c}();a.DefaultRecorderMaker=g;var f=function(){function c(a,b){void 0===a&&(a=window);void 0===b&&(b=new g);this.wnd=a;this.recMaker=b;this.protocol=
"https:";this.domDoneLoaded=!1;this._startTime=this.wallTime();this.splitPending=this.waitingOnStart=this.gotWindowScroll=!1;this.reidentifyCount=0}c.prototype.init=function(){a.isLoaded(this.wnd)||(a.initWindex(this.wnd),a.setLoaded(this.wnd,a.Namespace(this.wnd)),this.initApi(),this.start())};c.prototype.wallTime=function(){return(new Date).getTime()};c.prototype.now=function(){return this.wallTime()-this._startTime};c.prototype.startTime=function(){return this._startTime};c.prototype.setStartTime=
function(a){this._startTime=a};c.prototype.maybeAddInitialScroll=function(){!this.gotWindowScroll&&(document.body&&a.fsid(document.body))&&(this.recorder.eventWatcher().addWindowScroll(),this.gotWindowScroll=!0)};c.prototype.getHost=function(){return this.host};c.prototype.getProtocol=function(){return this.protocol};c.prototype.getOrgId=function(){return this.orgId};c.prototype.getIdentity=function(){return this.identity};c.prototype.getVars=function(){return this.vars};c.prototype.getWindow=function(){return this.wnd};
c.prototype.getCurrentSessionURL=function(c){var b=this.recorder.getCurrentSessionEnabled();if(b==a.GetCurrentSessionEnabledState.NoInfoYet)return null;if(b==a.GetCurrentSessionEnabledState.Disabled)return this.protocol+"//"+this.identity.host()+"/opt/upgrade";b=this.getCurrentSession();if(!b)return null;c&&(b+=":"+this.wallTime());return this.protocol+"//"+this.identity.host()+"/ui/"+this.identity.orgId()+"/session/"+encodeURIComponent(b)};c.prototype.getCurrentSession=function(){var c=this.recorder.getCurrentSessionEnabled();
return c!=a.GetCurrentSessionEnabledState.NoInfoYet&&c!=a.GetCurrentSessionEnabledState.Disabled&&this.identity.userId()?this.identity.userId()+":"+this.identity.sessionId():null};c.prototype.enableConsole=function(){this.recorder.console().enable()};c.prototype.disableConsole=function(){this.recorder.console().disable()};c.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];"log"!==a&&("info"!==a&&"warn"!==a&&"error"!==a&&"debug"!==a)&&(b.unshift(a),a="log");this.recorder.console().addLog(a,
b)};c.prototype.shutdown=function(){this.recorder?(this.recorder.shutdown(),this.recorder=null):a.logIfDebug("Recording already shut down.")};c.prototype.restart=function(){this.recorder?a.logIfDebug("Recording already started."):this.createRecorder(!0)};c.prototype.splitPage=function(a){this.waitingOnStart?this.splitPending=!0:(this.shutdown(),a&&this.identity.clear(),this.restart())};c.prototype._api=function(c,b){if(this.inFrame)a.logIfDebug("API calls may only be made from the top-most frame");
else if(this.recorder){var e=this.vars.api(c,b),f=e[0];if(e[1]){if(8>this.reidentifyCount){this.reidentifyCount++;a.FS_q_push(this.wnd,[c,b]);this.splitPage(!0);return}a.logIfDebug("reidentified too many times; giving up")}for(e=0;e<f.length;e++)this.recorder.queue().enqueue(f[e].Kind,f[e].Args)}else a.FS_q_push(this.wnd,[c,b])};c.prototype._cookies=function(){return this.identity.cookies()};c.prototype._setCookie=function(a,b){return this.identity.setCookie(a,b)};c.prototype.initApi=function(){var c=
this.wnd[a.Namespace(this.wnd)];c.getCurrentSessionURL=a.$entry(this.getCurrentSessionURL,this);c.getCurrentSession=a.$entry(this.getCurrentSession,this);c.enableConsole=a.$entry(this.enableConsole,this);c.disableConsole=a.$entry(this.disableConsole,this);c.log=a.$entry(this.log,this);c.shutdown=a.$entry(this.shutdown,this);c.restart=a.$entry(this.restart,this);c._api=a.$entry(this._api,this);c._cookies=a.$entry(this._cookies,this);c._setCookie=a.$entry(this._setCookie,this)};c.prototype.start=function(){var c=
this;a.initDebug(this.wnd);a.logIfDebug("script version "+a.CompiledVersion+" (compiled at "+a.CompiledTimestamp+")");this.host=a._fs_host(this.wnd);this.orgId=a._fs_org(this.wnd);this.host?this.orgId?(a.logIfDebug("host: "+this.host),a.logIfDebug("orgid: "+this.orgId),"localhost:8080"==this.host&&(this.protocol="http:"),this.identity=new a.Identity,this.inFrame||(this.vars=new a.Vars(this.identity),this.identity.initFromCookies(this.host,this.orgId)),this.canRecord(this.orgId)?(this.createRecorder(),
this.hookLoadEvents(),this.wnd.addEventListener("message",function(b){if("string"==typeof b.data)switch(a.parsePostMessageData(b.data)[0]){case a.FS_SHUTDOWN_FRAME:c.shutdown();break;case a.FS_RESTART_FRAME:c.restart()}})):this.hailMary()):a.logIfDebug("Missing global _fs_org. Recording disabled."):a.logIfDebug("Missing global _fs_host. Recording disabled.")};c.prototype.createRecorder=function(c){var b=this;this._startTime=this.wallTime();if(this.inFrame)this.recorder=this.recMaker.createInnerRecorder(this);
else{this.recorder=this.recMaker.createTopRecorder(this);for(var e=this.vars.drainApiQueue(a.FS_q_drain(this.wnd)),f=0;f<e.length;f++)this.recorder.queue().enqueue(e[f].Kind,e[f].Args)}this.waitingOnStart=!0;this.recorder.start(function(){b.waitingOnStart=!1;c&&b.recorder.tellAllFramesTo([a.FS_RESTART_FRAME]);b.splitPending&&(b.splitPending=!1,b.splitPage())});c&&(this.recorder.onDomLoad(),this.recorder.onLoad())};c.prototype.determineFrameness=function(c){var b=a._fs_transport(this.wnd);a._fs_is_outer_script(this.wnd)?
this.inFrame=!1:this.wnd!=top?this.inFrame=!0:b?b.init&&b.init(c)&&(this.inFrame=!0):this.inFrame=!1};c.prototype.canRecord=function(c){this.determineFrameness(c);return this.wnd.MutationEvent&&this.wnd.postMessage?!this.inFrame||a._fs_run_in_iframe(this.wnd)||a._fs_transport(this.wnd)?!0:(a.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),!1):(a.logIfDebug("missing required browser features"),!1)};c.prototype.hailMary=function(){var c=this,b=document.documentElement,
e=a._fs_replay_flags(this.wnd);a.logIfDebug("Unable to record playback stream.");var f=document.createElement("script");this.wnd.__fs_startResponse=function(a){c.identity.setIds(c.wnd,a.CookieDomain,a.UserIntId,a.SessionIntId);document.body.removeChild(f)};f.src="//"+this.host+"/rec/page?OrgId="+this.orgId+"&UserId="+this.identity.userId+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(a.baseUri(document))+"&Width="+b.clientWidth+"&Height="+b.clientHeight+"&ScreenWidth="+this.wnd.screen.width+
"&ScreenHeight="+this.wnd.screen.height+"&Referrer="+encodeURIComponent(document.referrer)+"&Doctype="+encodeURIComponent(a.doctypeString(document))+"&Fallback=true"+(e?"&ReplayFlags="+e:"");document.body.appendChild(f)};c.prototype.hookLoadEvents=function(){var c=this,b=function(){c.domDoneLoaded||(c.domDoneLoaded=!0,a.initWindex(c.wnd),c.recorder.onDomLoad())},e=!1,f=function(){e||(e=!0,c.recorder.onLoad())};switch(document.readyState){case "interactive":document.attachEvent||b();break;case "complete":b(),
f()}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",function(a){b()});e||this.wnd.addEventListener("load",function(a){b();f()})};return c}();a.GlobalContext=f})(n||(n={}));try{(new n.GlobalContext).init()}catch(H){n.sendToBugsnag(H,"error"),n._fs_debug(window)&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
